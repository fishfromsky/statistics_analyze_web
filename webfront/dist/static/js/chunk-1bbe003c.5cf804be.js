(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bbe003c"],{"28a5":function(t,e,a){"use strict";var l=a("aae3"),i=a("cb7c"),n=a("ebd6"),o=a("0390"),s=a("9def"),r=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,h=[].push,_="split",f="length",p="lastIndex",g=4294967295,m=!d((function(){RegExp(g,"y")}));a("214f")("split",2,(function(t,e,a,d){var v;return v="c"=="abbc"[_](/(b)*/)[1]||4!="test"[_](/(?:)/,-1)[f]||2!="ab"[_](/(?:ab)*/)[f]||4!="."[_](/(.?)(.?)/)[f]||"."[_](/()()/)[f]>1||""[_](/.?/)[f]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!l(t))return a.call(i,t,e);var n,o,s,r=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,_=void 0===e?g:e>>>0,m=new RegExp(t.source,d+"g");while(n=c.call(m,i)){if(o=m[p],o>u&&(r.push(i.slice(u,n.index)),n[f]>1&&n.index<i[f]&&h.apply(r,n.slice(1)),s=n[0][f],u=o,r[f]>=_))break;m[p]===n.index&&m[p]++}return u===i[f]?!s&&m.test("")||r.push(""):r.push(i.slice(u)),r[f]>_?r.slice(0,_):r}:"0"[_](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,l){var i=t(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,i,l):v.call(String(i),a,l)},function(t,e){var l=d(v,t,this,e,v!==a);if(l.done)return l.value;var c=i(t),h=String(this),_=n(c,RegExp),f=c.unicode,p=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(m?"y":"g"),b=new _(m?c:"^(?:"+c.source+")",p),x=void 0===e?g:e>>>0;if(0===x)return[];if(0===h.length)return null===r(b,h)?[h]:[];var k=0,y=0,D=[];while(y<h.length){b.lastIndex=m?y:0;var w,C=r(b,m?h:h.slice(y));if(null===C||(w=u(s(b.lastIndex+(m?0:y)),h.length))===k)y=o(h,y,f);else{if(D.push(h.slice(k,y)),D.length===x)return D;for(var S=1;S<=C.length-1;S++)if(D.push(C[S]),D.length===x)return D;y=k=w}}return D.push(h.slice(k)),D}]}))},"902d":function(t,e,a){"use strict";var l=a("d35e"),i=a.n(l);i.a},be32:function(t,e,a){"use strict";var l=a("dd89"),i=a.n(l);i.a},d35e:function(t,e,a){},d808:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24,lg:16}},[a("div",{staticClass:"main-content"},[a("div",{staticClass:"input-content"},[a("el-select",{staticClass:"input-item",attrs:{placeholder:"请选择项目类型"},model:{value:t.kind,callback:function(e){t.kind=e},expression:"kind"}},t._l(t.kind_option,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("div",{staticClass:"divider"}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:t.addData}},[t._v("添加项目")])],1),t._v(" "),"1"==t.kind?a("tabledata",{ref:"tabledata"}):t._e()],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"table-box"},[a("div",{staticClass:"box-title"},[a("span",{staticClass:"box-title-span"},[t._v("关联分析实验数据上传")])]),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://101.133.238.216:8000/api/uploadrelationfile","file-list":t.fileList,"on-error":t.handleError,"on-success":t.handleSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n            上传数据文件，仅限excel文件\n          ")])],1),t._v(" "),a("div",{staticClass:"box-title",staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"box-title-span"},[t._v("数据上传历史")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table_loading,expression:"table_loading"}],staticStyle:{"margin-top":"20px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"日期",width:"150",prop:"time"}}),t._v(" "),a("el-table-column",{attrs:{label:"文件名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDownload(e.$index)}}},[t._v("下载")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.$index)}}},[t._v("删除")])]}}])})],1)],1)])],1)],1)},i=[],n=(a("28a5"),a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.tableshow,expression:"tableshow"},{name:"loading",rawName:"v-loading",value:t.table_loading,expression:"table_loading"}],key:t.tablekey,staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.page_data,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"项目ID",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(l.project_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(l.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"运行类型",align:"center","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",[t._v(t._s(l.tag))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"运行状态",align:"center","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"未运行"==e.row.status?"info":"正在运行"==e.row.status?"success":"danger"}},[t._v(t._s(e.row.status))]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{size:"mini",type:"primary"},on:{click:t.Refresh}},[t._v("刷新")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"数据操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.AmendData(e.$index)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.Experiment(e.$index)}}},[t._v("实验")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.total_size},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{visible:t.choose_data_dialog,title:"实验数据文件选择",width:"30%"},on:{"update:visible":function(e){t.choose_data_dialog=e}}},[a("div",{staticClass:"option-header"},[a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"选择实验数据"},model:{value:t.selectdata,callback:function(e){t.selectdata=e},expression:"selectdata"}},t._l(t.fileData,(function(t){return a("el-option",{key:t.index,attrs:{label:t.name,value:t.index}})})),1),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.chooseData}},[t._v("确定")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.choose_col_dialog,title:"选择实验参数","custom-class":"col_dialog"},on:{"update:visible":function(e){t.choose_col_dialog=e}}},[a("div",{staticClass:"col_dialog"},[a("span",[t._v("选择关联分析参考指标")]),t._v(" "),a("el-radio-group",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},model:{value:t.reference_col,callback:function(e){t.reference_col=e},expression:"reference_col"}},t._l(t.select_cols,(function(t){return a("el-radio",{key:t,attrs:{label:t}})})),1),t._v(" "),a("span",[t._v("选择需要关联分析的指标")]),t._v(" "),a("el-checkbox-group",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.select_cols,(function(t){return a("el-checkbox",{key:t,attrs:{label:t}})})),1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.choose_col_dialog=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.startExperiment}},[t._v("确定")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.amend_dialog,title:"修改数据",width:"40%"},on:{"update:visible":function(e){t.amend_dialog=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.amend_dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.AmendDataConfirm}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.add_dialog,title:"添加数据"},on:{"update:visible":function(e){t.add_dialog=e}}},[a("el-form",{attrs:{model:t.add_form}},[a("el-form-item",{attrs:{label:"项目ID"}},[a("el-input",{attrs:{placeholder:"请输入项目ID","auto-complete":"off"},model:{value:t.add_form.project_id,callback:function(e){t.$set(t.add_form,"project_id",e)},expression:"add_form.project_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{placeholder:"请输入项目名称","auto-complete":"off"},model:{value:t.add_form.name,callback:function(e){t.$set(t.add_form,"name",e)},expression:"add_form.name"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.add_dialog=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addDataConfirm}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.choose_dialog,title:"选择关联分析算法",width:"30%"},on:{"update:visible":function(e){t.choose_dialog=e}}},[a("el-select",{attrs:{placeholder:"请选择想要进行的算法"},model:{value:t.choose_value,callback:function(e){t.choose_value=e},expression:"choose_value"}},t._l(t.choose_item,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.choose_dialog=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.ExperimentConfirm}},[t._v("确定")])],1)],1)],1)}),o=[],s=a("6400"),r={data:function(){return{tableshow:!0,table_loading:!1,tablekey:0,tableData:[],page_data:[],total_size:0,currentPage:1,page_size:10,fileData:[],choose_data_dialog:!1,selectdata:null,selected_project_index:null,selectfilePath:null,select_cols:null,select_cols_num:null,choose_col_dialog:!1,reference_col:null,checkList:[],add_form:{},add_dialog:!1,form:{},amend_dialog:!1,choose_dialog:!1,choose_value:null,choose_item:[{value:"1",label:"相关矩阵"},{value:"2",label:"随机森林"},{value:"3",label:"灰度分析"},{value:"4",label:"皮尔逊系数"}]}},watch:{selectdata:function(t){var e=this,a={};a["url"]=this.fileData[t].path,this.selectfilePath=this.fileData[t].path,Object(s["dc"])(a).then((function(t){2e4===t.code&&(e.select_cols=t.cols,e.select_cols_num=t.col_num)}))}},methods:{isInArray:function(t,e){for(var a=0;a<t.length;a++)if(t[a]===e)return!0;return!1},AmendData:function(t){this.form=this.page_data[t],this.amend_dialog=!0},AmendDataConfirm:function(){var t=this,e=this;Object(s["hb"])(this.form).then((function(a){2e4===a.code&&(t.$message({type:"success",message:"修改成功"}),e.amend_dialog=!1,e.table_loading=!0,e.page_data=[],e.tableData=[],e.getData())}))},addPrograme:function(){this.add_dialog=!0},addDataConfirm:function(){var t=this;this.add_form;if(""===this.add_form.project_id)this.$message.error("请输入项目ID");else if(""===this.add_form.name)this.$message.error("请输入项目名称");else{var e=this;Object(s["A"])(this.add_form).then((function(a){2e4===a.code&&(t.$message({type:"success",message:"添加成功"}),e.add_dialog=!1,e.table_loading=!0,e.page_data=[],e.tableData=[],e.getData())}))}},Select_Index:function(t,e){for(var a=[],l=!0,i=0;i<t.length;i++){l=!0;for(var n=0;n<e.length;n++)if(t[i]===e[n]){l=!1;break}l&&a.push(i)}return a},getIndex:function(t,e){for(var a=0;a<t.length;a++)if(t[a]===e)return a},getCookie:function(t){for(var e=document.cookie,a=e.split("; "),l=0;l<a.length;l++){var i=a[l].split("=");if(i[0]==t)return i[1]}return""},startExperiment:function(){this.choose_dialog=!0},ExperimentConfirm:function(){var t=this,e=this;if(null===this.reference_col)this.$message.error("请选择关联分析参考指标");else if(0===this.checkList.length)this.$message.error("请选择需要关联分析的指标");else if(null===this.choose_value)this.$message.error("请选择关联分析算法");else if(this.isInArray(this.checkList,this.reference_col))this.$message.error("参考指标和实验指标不能重叠");else{this.choose_col_dialog=!1,this.choose_data_dialog=!1;var a={};a["project_id"]=this.page_data[this.selected_project_index].project_id;var l=this.Select_Index(this.select_cols,this.checkList);a["drop_col"]=l,a["special"]=this.getIndex(this.select_cols,this.reference_col),a["path"]=this.selectfilePath,a["name"]=this.getCookie("environment_name"),a["algorithm"]=this.choose_value,Object(s["Ed"])(a).then((function(a){2e4===a.code&&(t.$message({type:"success",message:"运行成功"}),e.table_loading=!0,e.page_data=[],e.tableData=[],e.getData(),e.choose_dialog=!1)}))}},chooseData:function(){this.choose_col_dialog=!0},Refresh:function(){this.table_loading=!0,this.page_data=[],this.tableData=[],this.getData()},Experiment:function(t){this.selected_project_index=t,this.choose_data_dialog=!0},getData:function(){var t=this;Object(s["Zc"])().then((function(e){if(2e4===e.code){t.table_loading=!1,t.tableData=e.data;for(var a=t.page_size,l=t.currentPage-1,i=l*a;i<(l+1)*a;i++){if(i==e.data.length)break;e.data[i].tag="未选择",t.page_data.push(e.data[i])}t.total_size=e.data.length}}))},getFileList:function(){var t=this;this.fileData=[],Object(s["Xc"])().then((function(e){if(2e4===e.code)for(var a=e.data,l=0;l<a.length;l++){var i={};i["index"]=l,i["name"]=a[l].name,i["path"]=a[l].url,t.fileData.push(i)}}))},handleSizeChange:function(t){this.table_loading=!0,this.page_size=t,this.currentPage=1,this.page_data=[],this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.page_data=[],this.getData()}},mounted:function(){this.getData(),this.getFileList()}},c=r,d=(a("902d"),a("2877")),u=Object(d["a"])(c,n,o,!1,null,"29b38dfe",null),h=u.exports,_={components:{tabledata:h},data:function(){return{level:"",kind:"",kind_option:[{value:"1",label:"关联分析项目"}],tableData:[],table_loading:!1,fileList:[]}},watch:{},methods:{handleSuccess:function(){this.getFileList()},handleError:function(){this.$message.error("上传文件失败")},handleDownload:function(t){window.open("http://101.133.238.216:8000/"+this.tableData[t].path)},handleDelete:function(t){var e=this,a=this,l={};l["url"]=this.tableData[t].path,Object(s["Bb"])(l).then((function(t){2e4===t.code&&(e.$message({type:"success",message:"删除成功"}),a.getFileList())}))},getFileList:function(){var t=this;this.tableData=[],this.table_loading=!0,Object(s["Xc"])().then((function(e){if(2e4===e.code){var a=e.data;t.table_loading=!1;for(var l=0;l<a.length;l++){var i={};i["index"]=l,i["name"]=a[l].name,i["path"]=a[l].url;var n=a[l].url.split("/");i["time"]=n[n.length-4]+"年"+n[n.length-3]+"月"+n[n.length-2]+"日",t.tableData.push(i)}}}))},addData:function(){""===this.kind?this.$message.error("请选择项目编号"):this.$refs.tabledata.addPrograme()}},mounted:function(){this.getFileList()}},f=_,p=(a("be32"),Object(d["a"])(f,l,i,!1,null,"6edb10f2",null));e["default"]=p.exports},dd89:function(t,e,a){}}]);