(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ab9be26"],{"1f75":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"main-content"},[a("div",{staticClass:"input-content"},[a("el-select",{staticClass:"input-item",attrs:{placeholder:"请选择爬取的数据"},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},e._l(e.level_option,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),"3"==e.level?a("el-select",{staticClass:"input-item",attrs:{placeholder:"请选择爬取数据的关键字"},model:{value:e.kind,callback:function(t){e.kind=t},expression:"kind"}},e._l(e.kind_option,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),e._v(" "),"其他"==e.kind&&"3"==e.level?a("el-input",{staticStyle:{width:"200px","margin-left":"20px"},attrs:{placeholder:"请输入爬取数据的关键字"},model:{value:e.input_key_word,callback:function(t){e.input_key_word=t},expression:"input_key_word"}}):e._e(),e._v(" "),"3"==e.level?a("el-input",{staticStyle:{width:"200px","margin-left":"20px"},attrs:{placeholder:"请输入爬取数据的数量"},model:{value:e.count,callback:function(t){e.count=t},expression:"count"}}):e._e(),e._v(" "),"3"==e.level?a("el-input",{staticStyle:{width:"200px","margin-left":"20px"},attrs:{placeholder:"请输入地址关键字"},model:{value:e.district,callback:function(t){e.district=t},expression:"district"}}):e._e(),e._v(" "),"3"==e.level?a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{type:"year",placeholder:"开始年份",format:"yyyy"},model:{value:e.startYear,callback:function(t){e.startYear=t},expression:"startYear"}}):e._e(),e._v(" "),"3"==e.level?a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{type:"year",placeholder:"结束年份",format:"yyyy"},model:{value:e.endYear,callback:function(t){e.endYear=t},expression:"endYear"}}):e._e(),e._v(" "),a("div",{staticClass:"divider"}),e._v(" "),a("el-button",{staticClass:"input-item",attrs:{type:"primary",icon:"el-icon-download",loading:e.data_loading},on:{click:e.getData}},[e._v("爬取数据")]),e._v(" "),a("el-button",{staticClass:"input-item",attrs:{type:"primary",icon:"el-icon-stopwatch"},on:{click:e.getHistory}},[e._v("查看历史")])],1),e._v(" "),1==e.excel_download?a("div",{staticStyle:{"text-align":"center","margin-top":"20px","margin-bottom":"20px"}},[a("a",{staticStyle:{"text-decoration":"underline","font-style":"italic",color:"blue"},attrs:{href:e.excel_url}},[e._v("点击下载表格")])]):e._e()]),e._v(" "),e.showHistory?a("div",{staticClass:"main-content"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"年份",clearable:""},model:{value:e.listQuery.year,callback:function(t){e.$set(e.listQuery,"year",t)},expression:"listQuery.year"}},e._l(e.year_option,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),"3"==e.level?a("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"关键字",clearable:""},model:{value:e.listQuery.key_words,callback:function(t){e.$set(e.listQuery,"key_words",t)},expression:"listQuery.key_words"}},e._l(e.kw_option,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1):e._e(),e._v(" "),"3"==e.level?a("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"城市",clearable:""},model:{value:e.listQuery.city,callback:function(t){e.$set(e.listQuery,"city",t)},expression:"listQuery.city"}},e._l(e.city_option,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1):e._e(),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("\n      查询\n    ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table_loading,expression:"table_loading"}],key:e.tablekey,staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.page_data,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(l.date))])]}}],null,!1,4271589328)}),e._v(" "),a("el-table-column",{attrs:{label:"时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(l.time))])]}}],null,!1,444364017)}),e._v(" "),a("el-table-column",{attrs:{label:"表格种类",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(l.table_type))])]}}],null,!1,1911113757)}),e._v(" "),a("el-table-column",{attrs:{label:"关键字信息",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(l.key_words))])]}}],null,!1,491794129)}),e._v(" "),a("el-table-column",{attrs:{label:"城市",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(l.city))])]}}],null,!1,3469933155)}),e._v(" "),a("el-table-column",{attrs:{label:"数据操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("a",{staticStyle:{color:"#1890FF","font-size":"12px"},attrs:{href:l.file_location}},[e._v("下载")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteData(l.id)}}},[e._v("删除")])]}}],null,!1,2880208579)})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.delete_dialog,title:"删除数据",width:"30%"},on:{"update:visible":function(t){e.delete_dialog=t}}},[a("span",[e._v("确定删除改数据吗？删除后不可恢复")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delete_dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.deleteDataConfirm}},[e._v("确 定")])],1)]),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.total_size},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])},i=[],n=a("6400"),s={components:{},data:function(){return{level:"",kind:"",year:"",showHistory:!1,input_key_word:"",count:"",table_loading:!1,tablekey:0,tableData:[],page_data:[],formData:[],delete_dialog:!1,delete_id:"",total_size:0,currentPage:1,page_size:10,excel_url:"",startYear:"",endYear:"",district:"",table_type:"",excel_download:!1,data_loading:!1,form:{table_kind:"",key_word:"",startYear:"",endYear:"",count:"",district:""},listQuery:{table_type:"",year:"",key_words:"",city:""},year_option:[],kw_option:[],city_option:[],level_option:[{value:"1",label:"国内空气污染数据"},{value:"2",label:"国内水体污染数据"},{value:"3",label:"国内固体废物数据"}],kind_option:[{value:"垃圾",label:"垃圾"},{value:"废弃物",label:"废弃物"},{value:"回收",label:"回收"},{value:"塑料",label:"塑料"},{value:"金属",label:"金属"},{value:"纸业",label:"纸业"},{value:"其他",label:"其他"}]}},watch:{},methods:{getData:function(){var e=this,t=this;if(""===t.level)t.$message.error("数据种类不能为空");else if("1"===t.level){this.form.table_kind=t.level;var a=this.form;this.data_loading=!0,this.excel_download=!1,Object(n["Jc"])(a).then((function(t){2e4===t.code&&(e.$message({type:"success",message:"success"}),e.data_loading=!1,e.excel_download=!0,e.excel_url=t.excel_url),e.data_loading=!1}))}else if("2"===t.level){this.form.table_kind=t.level;var l=this.form;this.data_loading=!0,this.excel_download=!1,Object(n["Lc"])(l).then((function(t){2e4===t.code&&(e.$message({type:"success",message:"success"}),e.data_loading=!1,e.excel_download=!0,e.excel_url=t.excel_url),e.data_loading=!1}))}else if("3"===t.level)if(""===t.kind||""===t.count||""===t.startYear||""===t.endYear)t.$message.error("请填写完整数据！");else if("其他"===t.kind?this.form.key_word=t.input_key_word:this.form.key_word=t.kind,t.startYear>t.endYear)t.$message.error("请填写正确的时间区间！");else{this.form.table_kind=t.level,this.form.startYear=t.startYear,this.form.endYear=t.endYear,this.form.count=t.count,this.form.district=t.district;var i=this.form;this.data_loading=!0,this.excel_download=!1,Object(n["Kc"])(i).then((function(t){2e4===t.code&&(e.$message({type:"success",message:"success"}),e.data_loading=!1,e.excel_download=!0,e.excel_url=t.excel_url),e.data_loading=!1}))}},getHistory:function(){var e=this;""===e.level?e.$message.error("数据种类不能为空"):("1"===e.level?e.table_type="国内空气污染数据":"2"===e.level?e.table_type="国内水体污染数据":"3"===e.level&&(e.table_type="国内固体废物数据"),this.showHistory=!0,Object(n["Mb"])(e.table_type).then((function(t){if(2e4===t.code){e.table_loading=!1,e.tableData=t.data;var a=e.page_size,l=e.currentPage-1;e.page_data=[];for(var i=l*a;i<(l+1)*a;i++){if(i==t.data.length)break;e.page_data.push(t.data[i])}e.total_size=t.data.length,e.year_option=t.unique_year_list,e.kw_option=t.unique_kw_list,e.city_option=t.unique_city_list}})))},handleFilter:function(){var e=this,t=this;t.listQuery.table_type=t.table_type,Object(n["yd"])(t.listQuery).then((function(a){if(2e4===a.code){t.table_loading=!1,t.tableData=a.data;var l=t.page_size,i=t.currentPage-1;t.page_data=[],e.$message({type:"success",message:a.data});for(var n=i*l;n<(i+1)*l;n++){if(n==a.data.length)break;t.page_data.push(a.data[n])}t.total_size=a.data.length,t.year_option=a.unique_year_list,t.kw_option=a.unique_kw_list,t.city_option=a.unique_city_list}}))},deleteData:function(e){this.delete_dialog=!0,this.delete_id=e},deleteDataConfirm:function(){var e=this;Object(n["lb"])(this.delete_id).then((function(t){2e4===t.code&&(e.$message({type:"success",message:"删除成功"}),e.delete_dialog=!1,e.getHistory())}))},handleSizeChange:function(e){this.table_loading=!0,this.page_size=e,this.currentPage=1,this.page_data=[],this.getHistory()},handleCurrentChange:function(e){this.currentPage=e,this.page_data=[],this.getHistory()}},mounted:function(){}},o=s,r=(a("9817"),a("2877")),c=Object(r["a"])(o,l,i,!1,null,"edfe9aae",null);t["default"]=c.exports},9817:function(e,t,a){"use strict";var l=a("ad81"),i=a.n(l);i.a},ad81:function(e,t,a){}}]);