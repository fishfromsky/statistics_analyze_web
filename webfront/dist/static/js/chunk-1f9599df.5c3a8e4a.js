(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f9599df"],{"28a5":function(t,e,i){"use strict";var l=i("aae3"),s=i("cb7c"),a=i("ebd6"),n=i("0390"),o=i("9def"),r=i("5f1b"),c=i("520a"),u=i("79e5"),d=Math.min,h=[].push,m="split",v="length",_="lastIndex",f=4294967295,p=!u((function(){RegExp(f,"y")}));i("214f")("split",2,(function(t,e,i,u){var g;return g="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[v]||2!="ab"[m](/(?:ab)*/)[v]||4!="."[m](/(.?)(.?)/)[v]||"."[m](/()()/)[v]>1||""[m](/.?/)[v]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!l(t))return i.call(s,t,e);var a,n,o,r=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,m=void 0===e?f:e>>>0,p=new RegExp(t.source,u+"g");while(a=c.call(p,s)){if(n=p[_],n>d&&(r.push(s.slice(d,a.index)),a[v]>1&&a.index<s[v]&&h.apply(r,a.slice(1)),o=a[0][v],d=n,r[v]>=m))break;p[_]===a.index&&p[_]++}return d===s[v]?!o&&p.test("")||r.push(""):r.push(s.slice(d)),r[v]>m?r.slice(0,m):r}:"0"[m](void 0,0)[v]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,l){var s=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,s,l):g.call(String(s),i,l)},function(t,e){var l=u(g,t,this,e,g!==i);if(l.done)return l.value;var c=s(t),h=String(this),m=a(c,RegExp),v=c.unicode,_=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),b=new m(p?c:"^(?:"+c.source+")",_),x=void 0===e?f:e>>>0;if(0===x)return[];if(0===h.length)return null===r(b,h)?[h]:[];var k=0,y=0,C=[];while(y<h.length){b.lastIndex=p?y:0;var S,w=r(b,p?h:h.slice(y));if(null===w||(S=d(o(b.lastIndex+(p?0:y)),h.length))===k)y=n(h,y,v);else{if(C.push(h.slice(k,y)),C.length===x)return C;for(var L=1;L<=w.length-1;L++)if(C.push(w[L]),C.length===x)return C;y=k=S}}return C.push(h.slice(k)),C}]}))},4161:function(t,e,i){},5264:function(t,e,i){"use strict";i.r(e);var l,s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dashboard-container"},[i("div",{staticClass:"header"},[i("div",{staticClass:"header-title"},[t._v(t._s(t.algorithm_name))])]),t._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[i("el-col",{attrs:{xs:24,sm:24,lg:16}},[i("div",{staticClass:"main-step-header"},[i("el-select",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"选择实验数据"},model:{value:t.selectdata,callback:function(e){t.selectdata=e},expression:"selectdata"}},t._l(t.tableData,(function(t){return i("el-option",{key:t.index,attrs:{label:t.name,value:t.index}})})),1),t._v(" "),null!=t.selectdata?i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.ColSelect}},[t._v("参数选择")]):t._e()],1),t._v(" "),i("div",{staticClass:"main-step-content"},[i("el-steps",{attrs:{direction:"vertical",active:1}},t._l(t.modellist,(function(e){return i("el-step",{key:e.id,attrs:{title:e.name}},[i("template",{slot:"description"},[i("div",{staticClass:"detail-card"},[i("div",{staticClass:"detail-card-container"},[i("div",{staticClass:"detail-img"},[i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.pic_url,"preview-src-list":[e.pic_url]}})],1),t._v(" "),i("div",{staticClass:"detail-title"},[i("span",{staticClass:"detail-title-1"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"divider"}),t._v(" "),i("span",{staticClass:"detail-title-2"},[t._v(t._s(e.description))])]),t._v(" "),i("div",{staticClass:"vertical-divider"}),t._v(" "),i("div",{staticClass:"status-box"},[i("span",{staticClass:"status-title"},[t._v("模型运行状态")]),t._v(" "),i("div",{staticClass:"status-label"},[i("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.status))])],1),t._v(" "),i("div",{staticClass:"status-panel"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.Refresh}},[t._v("刷新状态")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return t.seeResult(e.id)}}},[t._v("查看结果")])],1)])])])])],2)})),1)],1)]),t._v(" "),i("el-col",{attrs:{xs:24,sm:24,lg:8}},[i("div",{staticClass:"table-box"},[i("div",{staticClass:"box-title"},[i("span",{staticClass:"box-title-span"},[t._v("实验数据上传")])]),t._v(" "),i("el-upload",{staticClass:"upload-demo",attrs:{action:"http://101.133.238.216:8000/api/uploadfile","file-list":t.fileList,"on-error":t.handleError,"on-success":t.handleSuccess}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n            上传数据文件，仅限excel文件\n          ")])],1),t._v(" "),i("div",{staticClass:"box-title",staticStyle:{"margin-top":"10px"}},[i("span",{staticClass:"box-title-span"},[t._v("数据上传历史")])]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table_loading,expression:"table_loading"}],staticStyle:{"margin-top":"20px"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{label:"日期",width:"150",prop:"time"}}),t._v(" "),i("el-table-column",{attrs:{label:"文件名",prop:"name"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.handleDownload(e.row)}}},[t._v("下载")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.handleDelete(e.index)}}},[t._v("删除")])]}}])})],1)],1)])],1),t._v(" "),i("el-dialog",{attrs:{"before-close":t.handleClose,visible:t.note_dialog,title:"提示信息"},on:{"update:visible":function(e){t.note_dialog=e}}},[i("span",[t._v('请从编辑算法页面点击"开始实验"按钮进入本页面！')]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleClose}},[t._v("确定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"参数选择",visible:t.kmeans_dialog},on:{"update:visible":function(e){t.kmeans_dialog=e}}},[i("div",{staticClass:"col_dialog"},[i("span",[t._v("选择聚类指标")]),t._v(" "),i("el-checkbox-group",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.select_cols,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}})})),1)],1),t._v(" "),i("template",{slot:"footer"},[i("el-button",{on:{click:function(e){t.kmeans_dialog=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.ColSelectKmeansConfirm}},[t._v("确定")])],1)],2),t._v(" "),i("el-dialog",{attrs:{title:"参数选择",visible:t.col_dialog,"custom-class":"col_dialog"},on:{"update:visible":function(e){t.col_dialog=e}}},[i("div",{staticClass:"col_dialog"},[i("span",[t._v("选择需要进行关联分析的特征")]),t._v(" "),i("el-checkbox-group",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.select_cols,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}})})),1),t._v(" "),i("span",[t._v("选择关联分析参考数据")]),t._v(" "),i("el-radio-group",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},model:{value:t.reference_col,callback:function(e){t.reference_col=e},expression:"reference_col"}},t._l(t.select_cols,(function(t){return i("el-radio",{key:t,attrs:{label:t}})})),1),t._v(" "),i("span",[t._v("选取相关性前多少个特征作为预测数据")]),t._v(" "),i("el-input",{staticStyle:{width:"25%","margin-top":"20px"},attrs:{type:"number",placeholder:"请输入特征数"},model:{value:t.relative_max,callback:function(e){t.relative_max=e},expression:"relative_max"}})],1),t._v(" "),i("template",{slot:"footer"},[i("el-button",{on:{click:function(e){t.col_dialog=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.ColSelectConfirm}},[t._v("确定")])],1)],2),t._v(" "),i("el-dialog",{attrs:{visible:t.result_dialog,title:"实验结果历史记录"},on:{"update:visible":function(e){t.result_dialog=e}}},[i("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:t.excelList,border:""}},[i("el-table-column",{attrs:{label:"运行结果文件",prop:"name"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[i("a",{staticStyle:{color:"#1890FF","font-size":"12px"},attrs:{href:l.url}},[t._v("下载")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.DeleteRelationExcel(l.url)}}},[t._v("删除")])]}}])})],1)],1)],1)},a=[],n=i("bd86"),o=(i("7f7f"),i("28a5"),i("6400")),r={data:function(){return{kmeans_dialog:!1,result_dialog:!1,selectdata:null,note_dialog:!1,algorithm_name:"",algorithm_Id:null,username:"",time:"",modellist:[],fileList:[],filedate:"",selectfilePath:"",tableData:[],table_loading:!1,rule:[],select_cols:[],checkList:[],select_cols_num:0,reference_col:null,col_dialog:!1,relative_max:null,excelList:[]}},watch:{selectdata:function(t){var e=this,i={};i["url"]=this.tableData[t].path,this.selectfilePath=this.tableData[t].path,Object(o["dc"])(i).then((function(t){2e4===t.code&&(e.select_cols=t.cols,e.select_cols_num=t.col_num)}))}},methods:(l={Refresh:function(){this.getWholeInfo()},seeResult:function(t){console.log(t),this.excelList=[],this.result_dialog=!0,16==t?this.getExcelResult(o["Wc"]):13==t?this.getExcelResult(o["Dc"]):14==t?this.getExcelResult(o["Rc"]):15===t&&this.getExcelResult(o["sc"])},getCookie:function(t){for(var e=document.cookie,i=e.split("; "),l=0;l<i.length;l++){var s=i[l].split("=");if(s[0]==t)return s[1]}return""},getIndex:function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return i},ColSelectKmeansConfirm:function(){for(var t=this,e=this,i=[],l=0;l<this.checkList.length;l++)i.push(this.getIndex(this.select_cols,this.checkList[l]));if(2!=i.length)this.$message.error("当前聚类仅支持两个维度");else{for(var s=[],a=0;a<this.modellist.length;a++)s.push(this.modellist[a].id);s.shift();var n={};n["name"]=this.getCookie("environment_name"),n["algorithm_id"]=this.algorithm_Id,n["model_id"]=this.modellist[0].id,n["path"]=this.selectfilePath,n["select_list"]=i.toString(),n["next_list"]=s.toString(),n["test_type"]=this.rule[1],Object(o["md"])(n).then((function(i){2e4===i.code&&(e.kmeans_dialog=!1,t.$message({type:"success",message:"实验成功"}))}))}},ColSelectConfirm:function(){var t=this,e=this;if(0===this.checkList.length||null===this.reference_col||null===this.relative_max)this.$message.error("填写信息必须完整");else{for(var i=[],l=0;l<this.checkList.length;l++)i.push(this.getIndex(this.select_cols,this.checkList[l]));for(var s=this.getIndex(this.select_cols,this.reference_col),a=!0,n=0;n<i.length;n++)if(i[n]==s){this.$message.error("参考列和实验列不能相同"),a=!1;break}if(a){for(var r={},c=[],u=0;u<this.modellist.length;u++)c.push(this.modellist[u].id);c.shift(),r["name"]=this.getCookie("environment_name"),r["algorithm_id"]=this.algorithm_Id,r["model_id"]=this.modellist[0].id,r["path"]=this.selectfilePath,r["relative_max"]=this.relative_max,r["select_list"]=i.toString(),r["next_list"]=c.toString(),r["choose_col"]=s,r["test_type"]=this.rule[1],Object(o["nd"])(r).then((function(i){2e4===i.code&&(e.col_dialog=!1,t.$message({type:"success",message:"运行成功"}))}))}}},ColSelect:function(){"1"===this.rule[0]&&"1"===this.rule[1]||"1"===this.rule[0]&&"2"===this.rule[1]?this.col_dialog=!0:"2"===this.rule[0]&&"1"===this.rule[1]&&(this.kmeans_dialog=!0)},handleDownload:function(t){},handleDelete:function(t){},DownloadRelationExcel:function(t){},DeleteRelationExcel:function(t){var e=this,i=this,l={};l["url"]=t,Object(o["Cb"])(l).then((function(t){2e4===t.code&&(i.result_dialog=!1,e.$message({type:"success",message:"删除成功"}))}))},handleSuccess:function(){this.getFileList()},getExcelResult:function(t){var e=this,i=this.getCookie("environment_name"),l={};this.excelList=[],l["user"]=i,t(l).then((function(t){if(2e4===t.code)for(var i=t.data,l=0;l<i.length;l++){var s={};s["url"]=i[l];var a=i[l].split("/");s["name"]=a[a.length-1],e.excelList.push(s)}}))},getFileList:function(){var t=this;this.tableData=[],this.table_loading=!0,Object(o["fc"])().then((function(e){if(2e4===e.code){var i=e.data;t.table_loading=!1;for(var l=0;l<i.length;l++){var s={};s["index"]=l,s["name"]=i[l].name,s["path"]=i[l].url;var a=i[l].url.split("/");s["time"]=a[a.length-4]+"年"+a[a.length-3]+"月"+a[a.length-2]+"日",t.tableData.push(s)}}}))},handleError:function(){this.$message.error("上传文件失败")},handleClose:function(){this.$router.push({path:"/project/select"})},isEmptyObject:function(t){for(var e in t)return!1;return!0}},Object(n["a"])(l,"getCookie",(function(t){for(var e=document.cookie,i=e.split("; "),l=0;l<i.length;l++){var s=i[l].split("=");if(s[0]==t)return s[1]}return""})),Object(n["a"])(l,"getmodelList",(function(){var t={};t["name"]=this.username,t["algorithm_id"]=this.algorithm_Id})),Object(n["a"])(l,"getWholeInfo",(function(){var t=this,e={};e["name"]=this.username,e["algorithm_id"]=this.algorithm_Id,Object(o["N"])(e).then((function(e){if(2e4===e.code){var i=e.data[0],l=i.algorithm;t.modellist=i.model,t.algorithm_name=l.name,t.algorithm_Id=l.project_id,t.time=l.add_time}}))})),l),created:function(){var t=this,e=this.$route.query;if(this.isEmptyObject(e))this.note_dialog=!0;else{var i={};i["name"]=e.username,this.username=e.username,this.rule=e.rule,i["algorithm_id"]=e.algorithm_Id,Object(o["N"])(i).then((function(e){if(2e4===e.code){var i=e.data[0],l=i.algorithm;t.modellist=i.model,t.algorithm_name=l.name,t.algorithm_Id=l.project_id,t.time=l.add_time}}))}},mounted:function(){this.getFileList()}},c=r,u=(i("5fcb"),i("2877")),d=Object(u["a"])(c,s,a,!1,null,"03c34360",null);e["default"]=d.exports},"5fcb":function(t,e,i){"use strict";var l=i("4161"),s=i.n(l);s.a}}]);