(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54fbb13a"],{"28a5":function(t,e,a){"use strict";var i=a("aae3"),l=a("cb7c"),n=a("ebd6"),s=a("0390"),o=a("9def"),r=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,h=[].push,f="split",_="length",p="lastIndex",m=4294967295,g=!d((function(){RegExp(m,"y")}));a("214f")("split",2,(function(t,e,a,d){var v;return v="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[_]||2!="ab"[f](/(?:ab)*/)[_]||4!="."[f](/(.?)(.?)/)[_]||"."[f](/()()/)[_]>1||""[f](/.?/)[_]?function(t,e){var l=String(this);if(void 0===t&&0===e)return[];if(!i(t))return a.call(l,t,e);var n,s,o,r=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,f=void 0===e?m:e>>>0,g=new RegExp(t.source,d+"g");while(n=c.call(g,l)){if(s=g[p],s>u&&(r.push(l.slice(u,n.index)),n[_]>1&&n.index<l[_]&&h.apply(r,n.slice(1)),o=n[0][_],u=s,r[_]>=f))break;g[p]===n.index&&g[p]++}return u===l[_]?!o&&g.test("")||r.push(""):r.push(l.slice(u)),r[_]>f?r.slice(0,f):r}:"0"[f](void 0,0)[_]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,i){var l=t(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,l,i):v.call(String(l),a,i)},function(t,e){var i=d(v,t,this,e,v!==a);if(i.done)return i.value;var c=l(t),h=String(this),f=n(c,RegExp),_=c.unicode,p=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),b=new f(g?c:"^(?:"+c.source+")",p),x=void 0===e?m:e>>>0;if(0===x)return[];if(0===h.length)return null===r(b,h)?[h]:[];var k=0,y=0,D=[];while(y<h.length){b.lastIndex=g?y:0;var w,C=r(b,g?h:h.slice(y));if(null===C||(w=u(o(b.lastIndex+(g?0:y)),h.length))===k)y=s(h,y,_);else{if(D.push(h.slice(k,y)),D.length===x)return D;for(var S=1;S<=C.length-1;S++)if(D.push(C[S]),D.length===x)return D;y=k=w}}return D.push(h.slice(k)),D}]}))},6637:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24,lg:16}},[a("div",{staticClass:"main-content"},[a("div",{staticClass:"input-content"},[a("el-select",{staticClass:"input-item",attrs:{placeholder:"请选择项目类型"},model:{value:t.kind,callback:function(e){t.kind=e},expression:"kind"}},t._l(t.kind_option,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("div",{staticClass:"divider"}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:t.addData}},[t._v("添加项目")])],1),t._v(" "),"1"==t.kind?a("tabledata",{ref:"tabledata"}):t._e()],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"table-box"},[a("div",{staticClass:"box-title"},[a("span",{staticClass:"box-title-span"},[t._v("非线性回归实验数据上传")])]),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://101.133.238.216:8000/api/uploadregressionfile","file-list":t.fileList,"on-error":t.handleError,"on-success":t.handleSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n            上传数据文件，仅限excel文件\n          ")])],1),t._v(" "),a("div",{staticClass:"box-title",staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"box-title-span"},[t._v("数据上传历史")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table_loading,expression:"table_loading"}],staticStyle:{"margin-top":"20px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"日期",width:"150",prop:"time"}}),t._v(" "),a("el-table-column",{attrs:{label:"文件名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDownload(e.$index)}}},[t._v("下载")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.$index)}}},[t._v("删除")])]}}])})],1)],1)])],1)],1)},l=[],n=(a("28a5"),a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.tableshow,expression:"tableshow"},{name:"loading",rawName:"v-loading",value:t.table_loading,expression:"table_loading"}],key:t.tablekey,staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.page_data,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"项目ID",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.project_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"运行类型",align:"center","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tag",[t._v(t._s(i.tag))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"运行状态",align:"center","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"未运行"==e.row.status?"info":"正在运行"==e.row.status?"success":"danger"}},[t._v(t._s(e.row.status))]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{size:"mini",type:"primary"},on:{click:t.Refresh}},[t._v("刷新")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"数据操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.AmendData(e.$index)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.Experiment(e.$index)}}},[t._v("实验")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.total_size},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{visible:t.choose_data_dialog,title:"实验数据文件选择",width:"30%"},on:{"update:visible":function(e){t.choose_data_dialog=e}}},[a("div",{staticClass:"option-header"},[a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"选择实验数据"},model:{value:t.selectdata,callback:function(e){t.selectdata=e},expression:"selectdata"}},t._l(t.fileData,(function(t){return a("el-option",{key:t.index,attrs:{label:t.name,value:t.index}})})),1),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.chooseData}},[t._v("确定")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.choose_col_dialog,title:"选择实验参数","custom-class":"col_dialog"},on:{"update:visible":function(e){t.choose_col_dialog=e}}},[a("div",{staticClass:"col_dialog"},[a("span",[t._v("选择需要预测的指标")]),t._v(" "),a("el-radio-group",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},model:{value:t.reference_col,callback:function(e){t.reference_col=e},expression:"reference_col"}},t._l(t.select_cols,(function(t){return a("el-radio",{key:t,attrs:{label:t}})})),1),t._v(" "),a("span",[t._v("选择数据预测关联指标")]),t._v(" "),a("el-checkbox-group",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.select_cols,(function(t){return a("el-checkbox",{key:t,attrs:{label:t}})})),1),t._v(" "),a("span",[t._v("选择回归公式高阶次方")]),t._v(" "),a("el-input",{staticStyle:{"margin-top":"20px",width:"120px"},attrs:{type:"number"},model:{value:t.formula_dim,callback:function(e){t.formula_dim=e},expression:"formula_dim"}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.choose_col_dialog=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.startExperiment}},[t._v("确定")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.amend_dialog,title:"修改数据",width:"40%"},on:{"update:visible":function(e){t.amend_dialog=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.amend_dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.AmendDataConfirm}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.add_dialog,title:"添加数据"},on:{"update:visible":function(e){t.add_dialog=e}}},[a("el-form",{attrs:{model:t.add_form}},[a("el-form-item",{attrs:{label:"项目ID"}},[a("el-input",{attrs:{placeholder:"请输入项目ID","auto-complete":"off"},model:{value:t.add_form.project_id,callback:function(e){t.$set(t.add_form,"project_id",e)},expression:"add_form.project_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{placeholder:"请输入项目名称","auto-complete":"off"},model:{value:t.add_form.name,callback:function(e){t.$set(t.add_form,"name",e)},expression:"add_form.name"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.add_dialog=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addDataConfirm}},[t._v("确定")])],1)],1)],1)}),s=[],o=a("6400"),r={data:function(){return{tableshow:!0,table_loading:!1,tablekey:0,tableData:[],page_data:[],total_size:0,currentPage:1,page_size:10,fileData:[],choose_data_dialog:!1,selectdata:null,selected_project_index:null,selectfilePath:null,select_cols:null,select_cols_num:null,choose_col_dialog:!1,reference_col:null,checkList:[],add_form:{},add_dialog:!1,form:{},amend_dialog:!1,formula_dim:null}},watch:{selectdata:function(t){var e=this,a={};a["url"]=this.fileData[t].path,this.selectfilePath=this.fileData[t].path,Object(o["dc"])(a).then((function(t){2e4===t.code&&(e.select_cols=t.cols,e.select_cols_num=t.col_num)}))}},methods:{isInArray:function(t,e){for(var a=0;a<t.length;a++)if(t[a]===e)return!0;return!1},AmendData:function(t){this.form=this.page_data[t],this.amend_dialog=!0},AmendDataConfirm:function(){var t=this,e=this;Object(o["gb"])(this.form).then((function(a){2e4===a.code&&(t.$message({type:"success",message:"修改成功"}),e.amend_dialog=!1,e.table_loading=!0,e.page_data=[],e.tableData=[],e.getData())}))},addPrograme:function(){this.add_dialog=!0},addDataConfirm:function(){var t=this;this.add_form;if(""===this.add_form.project_id)this.$message.error("请输入项目ID");else if(""===this.add_form.name)this.$message.error("请输入项目名称");else{var e=this;Object(o["z"])(this.add_form).then((function(a){2e4===a.code&&(t.$message({type:"success",message:"添加成功"}),e.add_dialog=!1,e.table_loading=!0,e.page_data=[],e.tableData=[],e.getData())}))}},Select_Index:function(t,e){for(var a=[],i=!0,l=0;l<t.length;l++){i=!0;for(var n=0;n<e.length;n++)if(t[l]===e[n]){i=!1;break}i&&a.push(l)}return a},getIndex:function(t,e){for(var a=0;a<t.length;a++)if(t[a]===e)return a},getCookie:function(t){for(var e=document.cookie,a=e.split("; "),i=0;i<a.length;i++){var l=a[i].split("=");if(l[0]==t)return l[1]}return""},startExperiment:function(){var t=this,e=this;if(null===this.reference_col)this.$message.error("请选择预测指标");else if(0===this.checkList.length)this.$message.error("请选择参考指标");else if(this.isInArray(this.checkList,this.reference_col))this.$message.error("参考指标不能和试验指标重叠");else if(null===this.formula_dim)this.$message.error("请输入公式高次方项");else if(this.formula_dim<=0)this.$message.error("输入高次方必须为正");else{this.choose_col_dialog=!1,this.choose_data_dialog=!1;var a={};a["project_id"]=this.page_data[this.selected_project_index].project_id;var i=this.Select_Index(this.select_cols,this.checkList);a["drop_col"]=i,a["special"]=this.getIndex(this.select_cols,this.reference_col),a["path"]=this.selectfilePath,a["name"]=this.getCookie("environment_name"),a["dim"]=this.formula_dim,Object(o["Cd"])(a).then((function(a){2e4===a.code&&(t.$message({type:"success",message:"运行成功"}),e.table_loading=!0,e.page_data=[],e.tableData=[],e.getData())}))}},chooseData:function(){this.choose_col_dialog=!0},Refresh:function(){this.table_loading=!0,this.page_data=[],this.tableData=[],this.getData()},Experiment:function(t){this.selected_project_index=t,this.choose_data_dialog=!0},getData:function(){var t=this;Object(o["Qc"])().then((function(e){if(2e4===e.code){t.table_loading=!1,t.tableData=e.data;for(var a=t.page_size,i=t.currentPage-1,l=i*a;l<(i+1)*a;l++){if(l==e.data.length)break;e.data[l].tag="未选择",t.page_data.push(e.data[l])}t.total_size=e.data.length}}))},getFileList:function(){var t=this;this.fileData=[],Object(o["Sc"])().then((function(e){if(2e4===e.code)for(var a=e.data,i=0;i<a.length;i++){var l={};l["index"]=i,l["name"]=a[i].name,l["path"]=a[i].url,t.fileData.push(l)}}))},handleSizeChange:function(t){this.table_loading=!0,this.page_size=t,this.currentPage=1,this.page_data=[],this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.page_data=[],this.getData()}},mounted:function(){this.getData(),this.getFileList()}},c=r,d=(a("e080"),a("2877")),u=Object(d["a"])(c,n,s,!1,null,"2556af56",null),h=u.exports,f={components:{tabledata:h},data:function(){return{level:"",kind:"",kind_option:[{value:"1",label:"多元非线性回归"}],tableData:[],table_loading:!1,fileList:[]}},watch:{},methods:{handleSuccess:function(){this.getFileList()},handleError:function(){this.$message.error("上传文件失败")},handleDownload:function(t){window.open("http://101.133.238.216:8000/"+this.tableData[t].path)},handleDelete:function(t){var e=this,a=this,i={};i["url"]=this.tableData[t].path,Object(o["Bb"])(i).then((function(t){2e4===t.code&&(e.$message({type:"success",message:"删除成功"}),a.getFileList())}))},getFileList:function(){var t=this;this.tableData=[],this.table_loading=!0,Object(o["Sc"])().then((function(e){if(2e4===e.code){var a=e.data;t.table_loading=!1;for(var i=0;i<a.length;i++){var l={};l["index"]=i,l["name"]=a[i].name,l["path"]=a[i].url;var n=a[i].url.split("/");l["time"]=n[n.length-4]+"年"+n[n.length-3]+"月"+n[n.length-2]+"日",t.tableData.push(l)}}}))},addData:function(){""===this.kind?this.$message.error("请选择项目编号"):this.$refs.tabledata.addPrograme()}},mounted:function(){this.getFileList()}},_=f,p=(a("da64"),Object(d["a"])(_,i,l,!1,null,"0c896b1b",null));e["default"]=p.exports},"712e":function(t,e,a){},"95a5":function(t,e,a){},da64:function(t,e,a){"use strict";var i=a("95a5"),l=a.n(i);l.a},e080:function(t,e,a){"use strict";var i=a("712e"),l=a.n(i);l.a}}]);