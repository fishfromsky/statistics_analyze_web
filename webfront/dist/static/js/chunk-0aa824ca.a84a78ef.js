(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0aa824ca"],{"14bc":function(t,a,e){"use strict";var i=e("d86d"),s=e.n(i);s.a},4661:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"main-box"},[t._m(0),t._v(" "),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{xs:24,sm:24,lg:12}},[e("el-row",[e("el-col",{attrs:{xs:24,sm:24,lg:24}},[e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"titlebox"},[t._v("主要垃圾生产量变化")]),t._v(" "),e("biggarbage",{staticStyle:{height:"40vh"},attrs:{chartData:t.data1}})],1)]),t._v(" "),e("el-col",{attrs:{xs:24,sm:24,lg:24}},[e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"titlebox"},[t._v("日均垃圾清运量变化")]),t._v(" "),e("smallgarbage",{staticStyle:{height:"40vh"},attrs:{chartData:t.data3}})],1)])],1)],1),t._v(" "),e("el-col",{attrs:{xs:24,sm:24,lg:12}},[e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"titlebox"},[t._v(t._s(t.graphyear)+"年固废成分信息")]),t._v(" "),e("el-select",{staticClass:"choosebox",model:{value:t.graphyear,callback:function(a){t.graphyear=a},expression:"graphyear"}},t._l(t.chooseyear,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),e("graphchart",{staticStyle:{height:"80vh"},attrs:{chartData:t.data2}})],1)])],1)],1)])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-text"},[t._v("上海市固废垃圾成分")])])}],r=(e("55dd"),e("6400")),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},o=[],l=e("313e"),h=e.n(l),d=e("ed08"),c={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(d["a"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};e("18a8");var p={mixins:[c],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=h.a.init(this.$el,"walden"),this.setOptions(this.chartData)},setOptions:function(t){this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t.year,splitLine:{show:!1}},yAxis:[{type:"value",name:"万吨",splitLine:{show:!1}}],series:[{name:"厨余垃圾",type:"line",yAxisIndex:0,data:t.cook},{name:"纸类垃圾",type:"line",yAxisIndex:0,data:t.paper},{name:"橡塑垃圾",type:"line",yAxisIndex:0,data:t.plastic},{name:"其他",type:"line",yAxisIndex:0,data:t.other}]})}}},u=p,f=e("2877"),y=Object(f["a"])(u,n,o,!1,null,null,null),v=y.exports,g=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},m=[];e("18a8");var b={mixins:[c],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Array,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=h.a.init(this.$el,"walden"),this.setOptions(this.chartData)},setOptions:function(t){this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},legend:{orient:"vertical",left:10,data:["厨余类","纸类","橡塑类","纺织类","木竹类","灰土类","砖瓦陶瓷类","玻璃类","金属类","其他","混合类","可回收类","可燃类"]},series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:t}]})}}},x=b,F=Object(f["a"])(x,g,m,!1,null,null,null),w=F.exports,_=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},$=[];e("18a8");var E={mixins:[c],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=h.a.init(this.$el,"walden"),this.setOptions(this.chartData)},setOptions:function(t){this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t.year,splitLine:{show:!1}},yAxis:{type:"value",splitLine:{show:!1}},series:[{name:"湿垃圾",type:"line",data:t.wet},{name:"干垃圾",type:"line",data:t.dry},{name:"可回收物",type:"line",data:t.recycle},{name:"有害垃圾",type:"line",data:t.harm},{name:"清运总量",type:"line",data:t.total}]})}}},z=E,D=Object(f["a"])(z,_,$,!1,null,null,null),S=D.exports,O={name:"index",components:{biggarbage:v,graphchart:w,smallgarbage:S},data:function(){return{data:null,data1:{year:[],cook:[],paper:[],plastic:[],other:[]},data3:{year:[],wet:[],dry:[],recycle:[],harm:[],total:[]},data2:[],graphyear:"2016",chooseyear:[]}},watch:{graphyear:function(t){this.getGraphData(t)}},methods:{getGraphData:function(t){for(var a=0;a<this.data.length;a++)if(this.data[a].year===t){var e=[];e.push({value:parseFloat(this.data[a].cook).toFixed(2),name:"厨余类"}),e.push({value:parseFloat(this.data[a].paper).toFixed(2),name:"纸类"}),e.push({value:parseFloat(this.data[a].plastic).toFixed(2),name:"橡塑类"}),e.push({value:parseFloat(this.data[a].clothe).toFixed(2),name:"纺织类"}),e.push({value:parseFloat(this.data[a].wood).toFixed(2),name:"木竹类"}),e.push({value:parseFloat(this.data[a].ash).toFixed(2),name:"灰土类"}),e.push({value:parseFloat(this.data[a].china).toFixed(2),name:"砖瓦陶瓷类"}),e.push({value:parseFloat(this.data[a].glass).toFixed(2),name:"玻璃类"}),e.push({value:parseFloat(this.data[a].metal).toFixed(2),name:"金属类"}),e.push({value:parseFloat(this.data[a].other).toFixed(2),name:"其他类"}),this.data2=e;break}},getData:function(){var t=this;Object(r["jc"])().then((function(a){if(2e4===a.code){t.data=a.data,t.data.sort((function(t,a){return parseInt(t.year)>parseInt(a.year)?1:-1}));for(var e=0;e<t.data.length;e++)t.data1.year.push(t.data[e].year),t.chooseyear.push({value:t.data[e].year,label:t.data[e].year}),t.data1.cook.push(parseFloat(parseFloat(t.data[e].cook).toFixed(2))),t.data1.paper.push(parseFloat(parseFloat(t.data[e].paper).toFixed(2))),t.data1.plastic.push(parseFloat(parseFloat(t.data[e].plastic).toFixed(2))),t.data1.other.push(parseFloat(parseFloat(t.data[e].other).toFixed(2))+parseFloat(parseFloat(t.data[e].clothe).toFixed(2))+parseFloat(parseFloat(t.data[e].wood).toFixed(2))+parseFloat(parseFloat(t.data[e].ash).toFixed(2))+parseFloat(parseFloat(t.data[e].china).toFixed(2))+parseFloat(parseFloat(t.data[e].glass).toFixed(2))+parseFloat(parseFloat(t.data[e].metal).toFixed(2)));t.getGraphData(t.data[t.data.length-1].year)}})),Object(r["gc"])().then((function(a){if(2e4===a.code){var e=a.data;e.sort((function(t,a){return parseInt(t.year)>parseInt(a.year)}));for(var i=0;i<e.length;i++)t.data3.year.push(e[i].year),t.data3.wet.push(parseFloat(e[i].wet)),t.data3.dry.push(parseFloat(e[i].dry)),t.data3.recycle.push(parseFloat(e[i].recycle)),t.data3.harm.push(parseFloat(e[i].harm)),t.data3.total.push(parseFloat(e[i].total))}}))}},mounted:function(){this.getData()}},C=O,R=(e("14bc"),Object(f["a"])(C,i,s,!1,null,"76b797c0",null));a["default"]=R.exports},d86d:function(t,a,e){},ed08:function(t,a,e){"use strict";e.d(a,"b",(function(){return s})),e.d(a,"a",(function(){return r}));e("4917"),e("4f7f"),e("5df3"),e("1c4c"),e("28a5"),e("ac6a"),e("456d"),e("f576"),e("6b54"),e("3b2b"),e("a481");var i=e("7618");function s(t,a){if(0===arguments.length)return null;var e,s=a||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(i["a"])(t)?e=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),e=new Date(t));var r={y:e.getFullYear(),m:e.getMonth()+1,d:e.getDate(),h:e.getHours(),i:e.getMinutes(),s:e.getSeconds(),a:e.getDay()},n=s.replace(/{([ymdhisa])+}/g,(function(t,a){var e=r[a];return"a"===a?["日","一","二","三","四","五","六"][e]:e.toString().padStart(2,"0")}));return n}function r(t,a,e){var i,s,r,n,o,l=function l(){var h=+new Date-n;h<a&&h>0?i=setTimeout(l,a-h):(i=null,e||(o=t.apply(r,s),i||(r=s=null)))};return function(){for(var s=arguments.length,h=new Array(s),d=0;d<s;d++)h[d]=arguments[d];r=this,n=+new Date;var c=e&&!i;return i||(i=setTimeout(l,a)),c&&(o=t.apply(r,h),r=h=null),o}}}}]);