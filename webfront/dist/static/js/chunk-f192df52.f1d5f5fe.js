(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f192df52"],{"138e":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"map_container"},[t("el-row",[t("el-col",{attrs:{xs:24,sm:24,lg:24}},[t("div",{staticClass:"map-wrapper"},[t("myamap")],1)])],1)],1)},n=[],r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-dialog",{attrs:{title:"地点详情",visible:e.dialogvisible,width:"50%"},on:{"update:visible":function(a){e.dialogvisible=a}}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dialogdata,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"工厂名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"address",label:"工厂地址"}}),e._v(" "),t("el-table-column",{attrs:{prop:"deal",label:"日处理量/吨"}})],1)],1),e._v(" "),t("div",{staticClass:"amap-container"},[e._l(e.circles,(function(e){return t("el-amap-circle",{attrs:{center:e.center,radius:e.radius,"fill-opacity":e.fillOpacity}})})),e._v(" "),t("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),e._v(" "),t("el-amap",{staticClass:"amap-demo",attrs:{vid:"amap",plugin:e.plugin,zoom:e.zoom,center:e.center}},e._l(e.markers,(function(e,a){return t("el-amap-marker",{key:a,attrs:{position:e.position,visible:!0,draggable:!1,vid:e.id,title:e.name,events:e.events}})})),1),e._v(" "),t("div",{staticClass:"input-box"},[t("label",{staticClass:"search_label"},[e._v("地理编码，根据地址获取经纬度坐标")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入搜索地理信息"},model:{value:e.search_address,callback:function(a){e.search_address=a},expression:"search_address"}},[t("template",{slot:"prepend"},[e._v("地址")])],2),e._v(" "),t("el-input",{staticStyle:{"margin-top":"20px"},attrs:{disabled:""},model:{value:e.search_geo,callback:function(a){e.search_geo=a},expression:"search_geo"}},[t("template",{slot:"prepend"},[e._v("坐标")])],2),e._v(" "),t("el-button",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{type:"primary"},on:{click:e.Address_Transfer}},[e._v("坐标转换")])],1)],2)],1)},l=[],s=(t("7f7f"),t("ac6a"),t("bc3a")),o=t.n(s),c=t("8f9b"),d=t.n(c),p=t("2b0e"),u=t("b775");function f(){return Object(u["a"])({url:"/getfactorylist",method:"get"})}function m(e){return Object(u["a"])({url:"/getfactorybyid",method:"get",params:e})}p["default"].use(d.a),d.a.initAMapApiLoader({key:"b84d5392efeafdc572f53e8de8dfd501",plugin:["AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor","AMap.Geolocation"]});var v={name:"amap",data:function(){var e=this;return{center:[121.398858,31.318299],search_address:"",search_geo:"",circles:[{center:[121.398858,31.318299],radius:200,fillOpacity:.5}],lng:0,lat:0,loaded:!1,zoom:15,markers:[],plugin:[{pName:"Geolocation",events:{init:function(a){a.getCurrentPosition((function(a,t){t&&t.position&&(e.lng=t.position.lng,e.lat=t.position.lat,e.center=[e.lng,e.lat],e.loaded=!0,e.$nextTick())}))}}},{pName:"ToolBar",events:{init:function(e){}}}],searchOption:{citylimit:!1},dialogvisible:!1,dialogdata:null}},methods:{Address_Transfer:function(){var e=this,a=e.search_address;o()({method:"get",url:"https://restapi.amap.com/v3/geocode/geo?address="+a+"&key=c83eaee63075867503a71b3282e11a1a"}).then((function(a){var t=a.data.geocodes[0].location;e.search_geo=t})).catch((function(e){console.log(e)}))},onSearchResult:function(e){var a=this,t=0,i=0;if(e.length>0){e.forEach((function(e){var n=e.lng,r=e.lat;i+=n,t+=r,a.markers.push([e.lng,e.lat])}));var n={lng:i/e.length,lat:t/e.length};this.center=[n.lng,n.lat]}},getFactoryList:function(){var e=this,a=this;f().then((function(t){if(2e4===t.code)for(var i=t.data,n=0;n<i.length;n++){var r={};r["id"]=i[n].id,r["name"]=i[n].name,r["address"]=i[n].address,r["deal"]=i[n].deal,r["position"]=[i[n].longitude,i[n].latitude],r["events"]={click:function(e){var t={};t["id"]=e.target.F.vid,m(t).then((function(e){a.dialogvisible=!0,a.dialogdata=e.data}))}},a.markers.push(r)}else e.$message.error("error")}))}},mounted:function(){this.getFactoryList()}},h=v,g=(t("fd92"),t("2877")),b=Object(g["a"])(h,r,l,!1,null,"46330806",null),_=b.exports,y={name:"index",components:{myamap:_}},k=y,A=(t("58a7"),Object(g["a"])(k,i,n,!1,null,"3e1e85b4",null));a["default"]=A.exports},"58a7":function(e,a,t){"use strict";var i=t("740d"),n=t.n(i);n.a},"740d":function(e,a,t){},b4f5:function(e,a,t){},fd92:function(e,a,t){"use strict";var i=t("b4f5"),n=t.n(i);n.a}}]);