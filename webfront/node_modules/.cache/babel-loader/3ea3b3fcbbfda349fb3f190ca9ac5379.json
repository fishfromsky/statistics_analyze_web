{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\babel-loader\\lib\\index.js!D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web\\webfront\\src\\views\\repository\\linearregression\\manage\\components\\tabledata.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\src\\views\\repository\\linearregression\\manage\\components\\tabledata.vue","mtime":1621249997099},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _model = require(\"@/api/model\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      tableshow: true,\n      table_loading: false,\n      tablekey: 0,\n      tableData: [],\n      page_data: [],\n      total_size: 0,\n      currentPage: 1,\n      page_size: 10,\n      fileData: [],\n      choose_data_dialog: false,\n      selectdata: null,\n      selected_project_index: null,\n      selectfilePath: null,\n      select_cols: null,\n      select_cols_num: null,\n      choose_col_dialog: false,\n      reference_col: null,\n      checkList: [],\n      form: {},\n      amend_dialog: false,\n      add_form: {},\n      add_dialog: false\n    };\n  },\n  watch: {\n    selectdata: function selectdata(val) {\n      var that = this;\n      var data = {};\n      data[\"url\"] = this.fileData[val].path;\n      this.selectfilePath = this.fileData[val].path;\n      (0, _model.getexcelinfo)(data).then(function (res) {\n        if (res.code === 20000) {\n          that.select_cols = res.cols;\n          that.select_cols_num = res.col_num;\n        }\n      });\n    }\n  },\n  methods: {\n    isInArray: function isInArray(arr, item) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i] === item) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    addPrograme: function addPrograme() {\n      this.add_dialog = true;\n    },\n    addDataConfirm: function addDataConfirm() {\n      var _this = this;\n\n      var data = this.add_form;\n\n      if (this.add_form.project_id === '') {\n        this.$message.error('请输入项目ID');\n      } else if (this.add_form.name === '') {\n        this.$message.error('请输入项目名称');\n      } else {\n        var that = this;\n        (0, _model.addlinearregressionproject)(this.add_form).then(function (res) {\n          if (res.code === 20000) {\n            _this.$message({\n              type: 'success',\n              message: '添加成功'\n            });\n\n            that.add_dialog = false;\n            that.table_loading = true;\n            that.page_data = [];\n            that.tableData = [];\n            that.getData();\n          }\n        });\n      }\n    },\n    AmendDataConfirm: function AmendDataConfirm() {\n      var _this2 = this;\n\n      var that = this;\n      (0, _model.amendlinearregressionproject)(this.form).then(function (res) {\n        if (res.code === 20000) {\n          _this2.$message({\n            type: 'success',\n            message: '修改成功'\n          });\n\n          that.amend_dialog = false;\n          that.table_loading = true;\n          that.page_data = [];\n          that.tableData = [];\n          that.getData();\n        }\n      });\n    },\n    Select_Index: function Select_Index(arr_main, arr_child) {\n      var index = [];\n      var flag = true;\n\n      for (var i = 0; i < arr_main.length; i++) {\n        flag = true;\n\n        for (var j = 0; j < arr_child.length; j++) {\n          if (arr_main[i] === arr_child[j]) {\n            flag = false;\n            break;\n          }\n        }\n\n        if (flag) {\n          index.push(i);\n        }\n      }\n\n      return index;\n    },\n    getIndex: function getIndex(arr, item) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i] === item) {\n          return i;\n        }\n      }\n    },\n    getCookie: function getCookie(name) {\n      var strcookie = document.cookie;\n      var arrcookie = strcookie.split(\"; \");\n\n      for (var i = 0; i < arrcookie.length; i++) {\n        var arr = arrcookie[i].split(\"=\");\n\n        if (arr[0] == name) {\n          return arr[1];\n        }\n      }\n\n      return \"\";\n    },\n    startExperiment: function startExperiment() {\n      var _this3 = this;\n\n      var that = this;\n\n      if (this.reference_col === null) {\n        this.$message.error('请选择预测指标');\n      } else if (this.checkList.length === 0) {\n        this.$message.error('请选择参考指标');\n      } else if (this.isInArray(this.checkList, this.reference_col)) {\n        this.$message.error('参考指标和试验指标不能重叠');\n      } else {\n        this.choose_col_dialog = false;\n        this.choose_data_dialog = false;\n        var data = {};\n        data['project_id'] = this.page_data[this.selected_project_index].project_id;\n        var index_list = this.Select_Index(this.select_cols, this.checkList);\n        data['drop_col'] = index_list;\n        data['special'] = this.getIndex(this.select_cols, this.reference_col);\n        data['path'] = this.selectfilePath;\n        data['name'] = this.getCookie('environment_name');\n        (0, _model.startlinearregressionexperiment)(data).then(function (res) {\n          if (res.code === 20000) {\n            _this3.$message({\n              type: 'success',\n              message: '运行成功'\n            });\n\n            that.table_loading = true;\n            that.page_data = [];\n            that.tableData = [];\n            that.getData();\n          }\n        });\n      }\n    },\n    chooseData: function chooseData() {\n      this.choose_col_dialog = true;\n    },\n    Refresh: function Refresh() {\n      this.table_loading = true;\n      this.page_data = [];\n      this.tableData = [];\n      this.getData();\n    },\n    AmendData: function AmendData(val) {\n      this.form = this.page_data[val];\n      this.amend_dialog = true;\n    },\n    Experiment: function Experiment(val) {\n      this.selected_project_index = val;\n      this.choose_data_dialog = true;\n    },\n    getData: function getData() {\n      var that = this;\n      (0, _model.getlinearregressionproject)().then(function (res) {\n        if (res.code === 20000) {\n          that.table_loading = false;\n          that.tableData = res.data;\n          var size = that.page_size;\n          var index = that.currentPage - 1;\n\n          for (var i = index * size; i < (index + 1) * size; i++) {\n            if (i == res.data.length) {\n              break;\n            }\n\n            res.data[i].tag = \"未选择\";\n            that.page_data.push(res.data[i]);\n          }\n\n          that.total_size = res.data.length;\n        }\n      });\n    },\n    getFileList: function getFileList() {\n      var that = this;\n      this.fileData = [];\n      (0, _model.getlinearregressionmodelfile)().then(function (res) {\n        if (res.code === 20000) {\n          var data = res.data;\n\n          for (var i = 0; i < data.length; i++) {\n            var dict = {};\n            dict[\"index\"] = i;\n            dict[\"name\"] = data[i].name;\n            dict[\"path\"] = data[i].url;\n            that.fileData.push(dict);\n          }\n        }\n      });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.table_loading = true;\n      this.page_size = val;\n      this.currentPage = 1;\n      this.page_data = [];\n      this.getData();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.page_data = [];\n      this.getData();\n    }\n  },\n  mounted: function mounted() {\n    this.getData();\n    this.getFileList();\n  }\n};\nexports.default = _default;",null]}