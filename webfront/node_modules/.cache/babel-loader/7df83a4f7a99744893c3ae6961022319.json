{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\crawldata\\garbagedata\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\crawldata\\garbagedata\\index.vue","mtime":1609073358356},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _model = require(\"@/api/model\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  components: {},\n  data: function data() {\n    return {\n      level: '',\n      kind: '',\n      year: '',\n      showHistory: false,\n      input_key_word: '',\n      count: '',\n      table_loading: false,\n      tablekey: 0,\n      tableData: [],\n      page_data: [],\n      formData: [],\n      delete_dialog: false,\n      delete_id: '',\n      total_size: 0,\n      currentPage: 1,\n      page_size: 10,\n      excel_url: '',\n      startYear: '',\n      endYear: '',\n      district: '',\n      table_type: '',\n      excel_download: false,\n      data_loading: false,\n      form: {\n        table_kind: '',\n        key_word: '',\n        startYear: '',\n        endYear: '',\n        count: '',\n        district: ''\n      },\n      listQuery: {\n        table_type: '',\n        year: '',\n        key_words: '',\n        city: ''\n      },\n      year_option: [],\n      kw_option: [],\n      city_option: [],\n      level_option: [{\n        value: '1',\n        label: '国内空气污染数据'\n      }, {\n        value: '2',\n        label: '国内水体污染数据'\n      }, {\n        value: '3',\n        label: '国内固体废物数据'\n      }],\n      kind_option: [{\n        value: '垃圾',\n        label: '垃圾'\n      }, {\n        value: '废弃物',\n        label: '废弃物'\n      }, {\n        value: '回收',\n        label: '回收'\n      }, {\n        value: '塑料',\n        label: '塑料'\n      }, {\n        value: '金属',\n        label: '金属'\n      }, {\n        value: '纸业',\n        label: '纸业'\n      }, {\n        value: '其他',\n        label: '其他'\n      }]\n    };\n  },\n  watch: {},\n  methods: {\n    getData: function getData() {\n      var _this = this;\n\n      var that = this;\n\n      if (that.level === '') {\n        that.$message.error('数据种类不能为空');\n      } else if (that.level === '1') {\n        this.form.table_kind = that.level;\n        var data = this.form;\n        this.data_loading = true;\n        this.excel_download = false;\n        (0, _model.getnationpm)(data).then(function (res) {\n          if (res.code === 20000) {\n            _this.$message({\n              type: 'success',\n              message: 'success'\n            });\n\n            _this.data_loading = false;\n            _this.excel_download = true;\n            _this.excel_url = res.excel_url;\n          }\n\n          _this.data_loading = false;\n        });\n      } else if (that.level === '2') {\n        this.form.table_kind = that.level;\n        var _data = this.form;\n        this.data_loading = true;\n        this.excel_download = false;\n        (0, _model.getnationwaterpollution)(_data).then(function (res) {\n          if (res.code === 20000) {\n            _this.$message({\n              type: 'success',\n              message: 'success'\n            });\n\n            _this.data_loading = false;\n            _this.excel_download = true;\n            _this.excel_url = res.excel_url;\n          }\n\n          _this.data_loading = false;\n        });\n      } else if (that.level === '3') {\n        if (that.kind === '' || that.count === '' || that.startYear === '' || that.endYear === '') {\n          that.$message.error('请填写完整数据！');\n        } else {\n          if (that.kind === '其他') {\n            this.form.key_word = that.input_key_word;\n          } else {\n            this.form.key_word = that.kind;\n          }\n\n          if (that.startYear > that.endYear) {\n            that.$message.error('请填写正确的时间区间！');\n          } else {\n            this.form.table_kind = that.level;\n            this.form.startYear = that.startYear;\n            this.form.endYear = that.endYear;\n            this.form.count = that.count;\n            this.form.district = that.district;\n            var _data2 = this.form;\n            this.data_loading = true;\n            this.excel_download = false;\n            (0, _model.getnationsolidpollution)(_data2).then(function (res) {\n              if (res.code === 20000) {\n                _this.$message({\n                  type: 'success',\n                  message: 'success'\n                });\n\n                _this.data_loading = false;\n                _this.excel_download = true;\n                _this.excel_url = res.excel_url;\n              }\n\n              _this.data_loading = false;\n            });\n          }\n        }\n      }\n    },\n    getHistory: function getHistory() {\n      var that = this;\n\n      if (that.level === '') {\n        that.$message.error('数据种类不能为空');\n      } else {\n        if (that.level === '1') {\n          that.table_type = '国内空气污染数据';\n        } else if (that.level === '2') {\n          that.table_type = '国内水体污染数据';\n        } else if (that.level === '3') {\n          that.table_type = '国内固体废物数据';\n        }\n\n        this.showHistory = true;\n        (0, _model.getCrawlDataRecord)(that.table_type).then(function (res) {\n          if (res.code === 20000) {\n            that.table_loading = false;\n            that.tableData = res.data;\n            var size = that.page_size;\n            var index = that.currentPage - 1;\n            that.page_data = [];\n\n            for (var i = index * size; i < (index + 1) * size; i++) {\n              if (i == res.data.length) {\n                break;\n              }\n\n              that.page_data.push(res.data[i]);\n            }\n\n            that.total_size = res.data.length;\n            that.year_option = res.unique_year_list;\n            that.kw_option = res.unique_kw_list;\n            that.city_option = res.unique_city_list;\n          }\n        });\n      }\n    },\n    handleFilter: function handleFilter() {\n      var _this2 = this;\n\n      var that = this;\n      that.listQuery.table_type = that.table_type;\n      (0, _model.selectCrawlRecord)(that.listQuery).then(function (res) {\n        if (res.code === 20000) {\n          that.table_loading = false;\n          that.tableData = res.data;\n          var size = that.page_size;\n          var index = that.currentPage - 1;\n          that.page_data = [];\n\n          _this2.$message({\n            type: 'success',\n            message: res.data\n          });\n\n          for (var i = index * size; i < (index + 1) * size; i++) {\n            if (i == res.data.length) {\n              break;\n            }\n\n            that.page_data.push(res.data[i]);\n          }\n\n          that.total_size = res.data.length;\n          that.year_option = res.unique_year_list;\n          that.kw_option = res.unique_kw_list;\n          that.city_option = res.unique_city_list;\n        }\n      });\n    },\n    deleteData: function deleteData(id) {\n      this.delete_dialog = true;\n      this.delete_id = id;\n    },\n    deleteDataConfirm: function deleteDataConfirm() {\n      var _this3 = this;\n\n      (0, _model.deleteCrawlData)(this.delete_id).then(function (res) {\n        if (res.code === 20000) {\n          _this3.$message({\n            type: 'success',\n            message: '删除成功'\n          });\n\n          _this3.delete_dialog = false;\n\n          _this3.getHistory();\n        }\n      });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.table_loading = true;\n      this.page_size = val;\n      this.currentPage = 1;\n      this.page_data = [];\n      this.getHistory();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.page_data = [];\n      this.getHistory();\n    }\n  },\n  mounted: function mounted() {}\n};\nexports.default = _default;",null]}