{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\tree\\components\\dangerousgarbage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\tree\\components\\dangerousgarbage.vue","mtime":1609073358504},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/projectsAll/statistics_analyze_web_2/webfront/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _interopRequireWildcard2 = _interopRequireDefault(require(\"D:/projectsAll/statistics_analyze_web_2/webfront/node_modules/@babel/runtime/helpers/interopRequireWildcard\"));\n\nvar _model = require(\"@/api/model\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      table_loading: true,\n      tablekey: 0,\n      tableData: [],\n      page_data: [],\n      formData: [],\n      total_size: 0,\n      currentPage: 1,\n      page_size: 10,\n      amend_dialog: false,\n      delete_dialog: false,\n      add_dialog: false,\n      form: {},\n      add_form: {},\n      delete_form: {\n        id: ''\n      },\n      filename: 'dangerous_garbage',\n      autoWidth: true,\n      bookType: 'xlsx'\n    };\n  },\n  methods: {\n    formatJson: function formatJson(filterVal, jsonData) {\n      return jsonData.map(function (v) {\n        return filterVal.map(function (j) {\n          if (j === 'timestamp') {\n            return parseTime(v[j]);\n          } else {\n            return v[j];\n          }\n        });\n      });\n    },\n    DownLoad: function DownLoad() {\n      var _this = this;\n\n      Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/vendor/Export2Excel'));\n      }).then(function (excel) {\n        var tHeader = ['year', 'production', 'deal', 'use', 'store'];\n        var filterVal = ['year', 'production', 'deal', 'use', 'store'];\n        var list = _this.tableData;\n\n        var data = _this.formatJson(filterVal, list);\n\n        excel.export_json_to_excel({\n          header: tHeader,\n          data: data,\n          filename: _this.filename,\n          autoWidth: _this.autoWidth,\n          bookType: _this.bookType\n        });\n      });\n    },\n    getData: function getData() {\n      var that = this;\n      (0, _model.getdangerousgarbage)().then(function (res) {\n        if (res.code === 20000) {\n          that.table_loading = false;\n          that.tableData = res.data;\n          var size = that.page_size;\n          var index = that.currentPage - 1;\n\n          for (var i = index * size; i < (index + 1) * size; i++) {\n            if (i == res.data.length) {\n              break;\n            }\n\n            that.page_data.push(res.data[i]);\n          }\n\n          that.total_size = res.data.length;\n        }\n      });\n    },\n    AmendData: function AmendData(index) {\n      this.form = this.page_data[index];\n      this.amend_dialog = true;\n    },\n    AmendDataConfirm: function AmendDataConfirm() {\n      var _this2 = this;\n\n      var data = this.form;\n      var that = this;\n      (0, _model.amenddangerousgarbage)(data).then(function (res) {\n        if (res.code === 20000) {\n          _this2.$message({\n            type: 'success',\n            message: '修改成功'\n          });\n\n          that.page_data = [];\n          that.getData();\n        }\n      });\n      this.amend_dialog = false;\n    },\n    DeleteData: function DeleteData(index) {\n      this.delete_dialog = true;\n      this.delete_form.id = this.page_data[index].id;\n    },\n    DeleteDataConfirm: function DeleteDataConfirm() {\n      var _this3 = this;\n\n      var that = this;\n      (0, _model.deletedangeroudgarbage)(this.delete_form).then(function (res) {\n        if (res.code === 20000) {\n          _this3.$message({\n            type: 'success',\n            message: '删除成功'\n          });\n\n          that.page_data = [];\n          that.delete_dialog = false;\n          that.getData();\n        }\n      });\n    },\n    addData: function addData() {\n      this.add_dialog = true;\n    },\n    addDataConfirm: function addDataConfirm() {\n      var _this4 = this;\n\n      var data = this.add_form;\n      var that = this;\n      (0, _model.addbyrowdangerousgarbage)(data).then(function (res) {\n        if (res.code === 20000) {\n          _this4.$message({\n            type: 'success',\n            message: '添加成功'\n          });\n\n          that.page_data = [];\n          that.getData();\n        }\n      });\n      this.add_dialog = false;\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.table_loading = true;\n      this.page_size = val;\n      this.currentPage = 1;\n      this.page_data = [];\n      this.getData();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.page_data = [];\n      this.getData();\n    }\n  },\n  mounted: function mounted() {\n    this.getData();\n  }\n};\nexports.default = _default;",null]}