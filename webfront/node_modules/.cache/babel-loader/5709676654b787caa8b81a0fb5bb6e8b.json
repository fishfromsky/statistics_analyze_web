{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\babel-loader\\lib\\index.js!D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web\\webfront\\src\\views\\dashboard\\admin\\components\\VisitChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\src\\views\\dashboard\\admin\\components\\VisitChart.vue","mtime":1609073358359},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/projectsAll/statistics_analyze_web/webfront/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _model = require(\"@/api/model\");\n\nvar _echarts = _interopRequireDefault(require(\"echarts\"));\n\nvar _shanghai = _interopRequireDefault(require(\"./mapdata/shanghai.json\"));\n\nvar _resize = _interopRequireDefault(require(\"./mixins/resize\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n_echarts.default.registerMap(\"shanghai\", _shanghai.default);\n\nvar _default = {\n  name: \"amap\",\n  mixins: [_resize.default],\n  props: {\n    className: {\n      type: String,\n      default: \"chart\"\n    },\n    width: {\n      type: String,\n      default: \"100%\"\n    },\n    height: {\n      type: String,\n      default: \"300px\"\n    },\n    autoResize: {\n      type: Boolean,\n      default: true\n    }\n  },\n  components: {},\n  data: function data() {\n    return {\n      bmap: {},\n      mapZoom: 10,\n      chart: _echarts.default.ECharts,\n      data: [],\n      geoCoordMap: {},\n      labelstatus: false,\n      centrl_geo: [121.477665, 31.226048],\n      zoom: 1.2\n    };\n  },\n  methods: {\n    labelchange: function labelchange() {\n      this.initChart();\n    },\n    convertData: function convertData(data) {\n      var res = [];\n\n      for (var i = 0; i < data.length; i++) {\n        var geoCoord = this.geoCoordMap[data[i].name];\n\n        if (geoCoord) {\n          res.push({\n            name: data[i].name,\n            value: geoCoord.concat(data[i].value)\n          });\n        }\n      }\n\n      return res;\n    },\n    getData: function getData() {\n      var that = this;\n      (0, _model.gettransferfactory)().then(function (res) {\n        if (res.code === 20000) {\n          var fac_data = res.data;\n\n          for (var i = 0; i < fac_data.length; i++) {\n            var f_name = fac_data[i][\"name\"];\n            var f_capacity = fac_data[i][\"capacity\"];\n            var f_longitude = fac_data[i][\"longitude\"];\n            var f_latitude = fac_data[i][\"latitude\"];\n            that.data.push({\n              name: f_name,\n              value: f_capacity\n            });\n            that.geoCoordMap[f_name] = [f_longitude, f_latitude];\n          }\n\n          that.initChart();\n        }\n      });\n    },\n    initChart: function initChart() {\n      var img = new Image();\n      img.src = \"@/views/image/factory_bg.jpg\";\n      img.width = \"100%\";\n      img.height = \"100%\";\n      this.chart = _echarts.default.init(this.$refs.map);\n      this.chart.setOption({\n        legend: {\n          data: [\"中转站\"],\n          top: \"100\",\n          right: \"20\",\n          textStyle: {\n            color: \"#fff\"\n          },\n          orient: \"vertical\"\n        },\n        tooltip: {\n          trigger: \"item\",\n          backgroundColor: \" rgba(0, 161, 255, 0.4)\",\n          borderColor: \"#00faff\",\n          showDelay: 0,\n          hideDelay: 0,\n          enterable: true,\n          transitionDuration: 0,\n          extraCssText: \"z-index:100\",\n          formatter: function formatter(params, ticket, callback) {\n            //根据业务自己拓展要显示的内容\n            var res = \"\";\n\n            if (params.componentSubType === \"effectScatter\") {\n              var name = params.data.name;\n              var value = params.data.value[2];\n              res = \"<span style='color:#fff;'>\" + name + \"</span><br/>数据：\" + value;\n            } else {\n              var value = params.data.value;\n              res = \"<span style='color:#fff;'>p值\" + value + \"</span>\";\n            }\n\n            return res;\n          }\n        },\n        // backgroundColor: \"#013954\",\n        geo: {\n          map: \"shanghai\",\n          zoom: this.zoom,\n          center: this.centrl_geo,\n          label: {\n            emphasis: {\n              show: true,\n              textStyle: {\n                color: \"#fff\"\n              }\n            }\n          },\n          roam: true,\n          //是否允许缩放\n          itemStyle: {\n            normal: {\n              color: \"#101f32\",\n              //地图背景色\n              borderColor: \"#43d0d6\",\n              //省市边界线\n              borderWidth: 1.1\n            },\n            emphasis: {\n              color: \"#43d0d6\" //悬浮背景\n\n            }\n          }\n        },\n        series: [{\n          name: \"其他(万吨)\",\n          type: \"effectScatter\",\n          coordinateSystem: \"geo\",\n          data: this.convertData(this.data),\n          encode: {\n            value: 2\n          },\n          symbolSize: function symbolSize(val) {\n            return val[2] / 35;\n          },\n          rippleEffect: {\n            brushType: \"stroke\",\n            period: 3,\n            //特效动画时长\n            scale: 4 //波纹的最大缩放比例\n\n          },\n          hoverAnimation: true,\n          label: {\n            formatter: \"{b}\",\n            position: \"right\",\n            show: this.labelstatus\n          },\n          itemStyle: {\n            color: \"#f4e925\",\n            shadowBlur: 10,\n            shadowColor: \"#333\"\n          },\n          zlevel: 1\n        }]\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getData();\n  }\n};\nexports.default = _default;",null]}