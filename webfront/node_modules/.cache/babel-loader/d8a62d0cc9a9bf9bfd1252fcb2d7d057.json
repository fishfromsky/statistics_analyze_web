{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\repository\\relation\\result\\pearson\\components\\result.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\repository\\relation\\result\\pearson\\components\\result.vue","mtime":1609073358502},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/projectsAll/statistics_analyze_web_2/webfront/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _interopRequireWildcard2 = _interopRequireDefault(require(\"D:/projectsAll/statistics_analyze_web_2/webfront/node_modules/@babel/runtime/helpers/interopRequireWildcard\"));\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nvar _model = require(\"@/api/model\");\n\nvar _resultchart = _interopRequireDefault(require(\"./components/resultchart\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  components: {\n    chartresult: _resultchart.default\n  },\n  props: {\n    projectId: {\n      type: String,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      chart_dialog: false,\n      table_loading: false,\n      tablekey: 0,\n      tableData: [],\n      page_data: [],\n      total_size: 0,\n      currentPage: 1,\n      page_size: 10,\n      project_id: '',\n      filename: 'pearson_result',\n      autoWidth: true,\n      bookType: 'xlsx',\n      sort_list: [],\n      graph_data: {\n        p_value: [],\n        relate: [],\n        label: []\n      }\n    };\n  },\n  watch: {\n    projectId: function projectId(a, _) {\n      this.project_id = a;\n      this.initTable(a);\n      this.page_data = [];\n      this.tableData = [];\n      this.sort_list = [];\n    }\n  },\n  methods: {\n    showChart: function showChart(id) {\n      this.graph_data.result = [];\n      this.graph_data.label = [];\n      this.chart_dialog = true;\n      var chart_data = this.tableData;\n\n      for (var i = 0; i < chart_data.length; i++) {\n        if (chart_data[i].sort === id) {\n          this.graph_data.label.push(chart_data[i].label);\n          this.graph_data.relate.push(chart_data[i].relate);\n          this.graph_data.p_value.push(chart_data[i].pvalue);\n        }\n      }\n    },\n    timeStamptoTime: function timeStamptoTime(time) {\n      var date = new Date(time);\n      var Y = date.getFullYear() + '-';\n      var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n      var D = date.getDate() + ' ';\n      var h = date.getHours() + ':';\n      var m = date.getMinutes() + ':';\n      var s = date.getSeconds();\n      return Y + M + D + h + m + s;\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.table_loading = true;\n      this.page_size = val;\n      this.currentPage = 1;\n      this.page_data = [];\n      this.initTable(this.project_id);\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.page_data = [];\n      this.initTable(this.project_id);\n    },\n    initTable: function initTable(id) {\n      var that = this;\n      var dict = {};\n      dict['project_id'] = id;\n      this.table_loading = true;\n      (0, _model.getpearsonrelationresult)(dict).then(function (res) {\n        that.table_loading = false;\n        that.tableData = res.data;\n\n        for (var i = 0; i < res.data.length; i++) {\n          var time = res.data[i].time;\n          time = new Date(time.replace(/-/g, '/')).getTime() + 3600 * 1000 * 8;\n          res.data[i].time = that.timeStamptoTime(time);\n        }\n\n        var size = that.page_size;\n        var index = that.currentPage - 1;\n\n        for (var _i = index * size; _i < (index + 1) * size; _i++) {\n          if (_i == res.data.length) {\n            break;\n          }\n\n          that.page_data.push(res.data[_i]);\n        }\n\n        that.total_size = res.data.length;\n\n        for (var _i2 = 0; _i2 < that.tableData.length; _i2++) {\n          if (!that.isInArray(that.sort_list, that.tableData[_i2].sort)) {\n            that.sort_list.push(that.tableData[_i2].sort);\n          }\n        }\n\n        that.$emit('child-event', that.sort_list);\n      });\n    },\n    isInArray: function isInArray(arr, value) {\n      for (var i = 0; i < arr.length; i++) {\n        if (value === arr[i]) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    formatJson: function formatJson(filterVal, jsonData) {\n      return jsonData.map(function (v) {\n        return filterVal.map(function (j) {\n          if (j === 'timestamp') {\n            return parseTime(v[j]);\n          } else {\n            return v[j];\n          }\n        });\n      });\n    },\n    download: function download() {\n      var _this = this;\n\n      Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/vendor/Export2Excel'));\n      }).then(function (excel) {\n        var tHeader = ['label', 'relate', 'p_value', 'time', 'sort'];\n        var filterVal = ['label', 'relate', 'pvalue', 'time', 'sort'];\n        var list = _this.tableData;\n\n        var data = _this.formatJson(filterVal, list);\n\n        excel.export_json_to_excel({\n          header: tHeader,\n          data: data,\n          filename: _this.filename,\n          autoWidth: _this.autoWidth,\n          bookType: _this.bookType\n        });\n      });\n    }\n  },\n  mounted: function mounted() {}\n};\nexports.default = _default;",null]}