{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web\\webfront\\src\\views\\project\\board\\components\\leftboard\\components\\table.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\src\\views\\project\\board\\components\\leftboard\\components\\table.vue","mtime":1609073358471},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getalgorithmlist, deletealgorithmlist } from '@/api/model'\r\nexport default {\r\n    props:{\r\n        parentmsg:{\r\n            type: String,\r\n            required: true\r\n        }\r\n    },\r\n    data(){\r\n        return{\r\n            delete_dialog:false,\r\n            table_loading: false,\r\n            tableData: [],\r\n            page_data: [],\r\n            total_size: 0,\r\n            currentPage: 1,\r\n            page_size: 10,\r\n            delete_id: null\r\n        }\r\n    },\r\n    watch: {\r\n        parentmsg:function(a, _){\r\n            this.tableData = []\r\n            this.page_data = []\r\n            this.getData()\r\n        }\r\n    },\r\n    methods: {\r\n        editAlgorithm:function(index){\r\n            let algorithm_id = this.page_data[parseInt(index)].project_id\r\n            this.$router.push({\r\n                path: '/project/select',\r\n                query: {\r\n                    id: algorithm_id\r\n                }\r\n            })\r\n        },\r\n        getCookie:function(name){\r\n            var strcookie = document.cookie;\r\n            var arrcookie = strcookie.split(\"; \");\r\n            for ( var i = 0; i < arrcookie.length; i++) {\r\n                var arr = arrcookie[i].split(\"=\");\r\n                if (arr[0] == name){\r\n                    return arr[1];\r\n                }\r\n            }\r\n            return \"\";\r\n        },\r\n        getData:function(){\r\n            let that = this\r\n            this.table_loading = true\r\n            let data = {}\r\n            data['name'] = this.getCookie('environment_name')\r\n            getalgorithmlist(data).then(res=>{\r\n                if (res.code === 20000){\r\n                    that.table_loading = false\r\n                    that.tableData = res.data\r\n                    for (let i=0; i<res.data.length; i++){\r\n                        let time = res.data[i].add_time\r\n                        time = new Date(time.replace(/-/g,'/')).getTime()+3600*1000*8\r\n                        res.data[i].add_time = that.timeStamptoTime(time)\r\n                    }\r\n                    let size = that.page_size\r\n                    let index = that.currentPage-1\r\n                    for (let i=index*size; i<(index+1)*size; i++){\r\n                        if (i==res.data.length){\r\n                            break\r\n                        }\r\n                        that.page_data.push(res.data[i])\r\n                    }\r\n                    that.total_size = res.data.length\r\n                }\r\n            })\r\n        },\r\n        timeStamptoTime:function(time){\r\n            var date = new Date(time);\r\n            let Y = date.getFullYear() + '-';\r\n            let M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';\r\n            let D = date.getDate() + ' ';\r\n            let h = date.getHours() + ':';\r\n            let m = date.getMinutes() + ':';\r\n            let s = date.getSeconds();\r\n            return Y+M+D+h+m+s;\r\n        },\r\n        deleteProject:function(id){\r\n            this.delete_id = this.page_data[parseInt(id)].project_id\r\n            this.delete_dialog = true\r\n        },\r\n        deleteConfirm:function(){\r\n            let that = this\r\n            let dict = {}\r\n            dict['project_id'] = this.delete_id\r\n            deletealgorithmlist(dict).then(res=>{\r\n                if (res.code === 20000){\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '删除成功'\r\n                    })\r\n                    that.delete_dialog = false\r\n                    that.page_data = []\r\n                    that.tableData = []\r\n                    that.getData()\r\n                }\r\n            })\r\n\r\n        },\r\n        handleSizeChange(val){\r\n            this.table_loading = true\r\n            this.page_size = val\r\n            this.currentPage = 1\r\n            this.page_data = []\r\n            this.getData()\r\n        },\r\n        handleCurrentChange(val){\r\n            this.currentPage = val\r\n            this.page_data = []\r\n            this.getData()\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getData()\r\n    }\r\n}\r\n",null]}