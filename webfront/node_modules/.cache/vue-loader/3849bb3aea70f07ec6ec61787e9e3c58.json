{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\population\\District\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\population\\District\\index.vue","mtime":1609073358435},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { filterlinepopulationdistrict, getdistrictpopulation, filterbarpopulationdistrict } from '@/api/model'\r\nimport district from './components/disitrict'\r\nimport districtdensity from './components/districtdensity'\r\nimport timepopulation from './components/timepopulation'\r\nimport timedensity from './components/timedensity'\r\nexport default {\r\n  name: \"index\",\r\n  components:{\r\n      district,\r\n      districtdensity,\r\n      timepopulation,\r\n      timedensity\r\n  },\r\n  data(){\r\n      return{\r\n          DistrictInfo: {\r\n              district: '',\r\n              year: [],\r\n              population: [],\r\n              population_density: []\r\n          },\r\n          TimeInfo:{\r\n              district: [],\r\n              population: [],\r\n              population_density: []\r\n          },\r\n          year_option: [],\r\n          choose_year: '2017',\r\n          district_choose: '浦东新区',\r\n          district_options: [\r\n            { label: \"黄浦区\", value: \"黄浦区\" },\r\n            { label: \"普陀区\", value: \"普陀区\" },\r\n            { label: \"静安区\", value: \"静安区\" },\r\n            { label: \"长宁区\", value: \"长宁区\" },\r\n            { label: \"徐汇区\", value: \"徐汇区\" },\r\n            { label: \"虹口区\", value: \"虹口区\" },\r\n            { label: \"杨浦区\", value: \"杨浦区\" },\r\n            { label: \"宝山区\", value: \"宝山区\" },\r\n            { label: \"嘉定区\", value: \"嘉定区\" },\r\n            { label: \"闵行区\", value: \"闵行区\" },\r\n            { label: \"浦东新区\", value: \"浦东新区\" },\r\n            { label: \"金山区\", value: \"金山区\" },\r\n            { label: \"松江区\", value: \"松江区\" },\r\n            { label: \"青浦区\", value: \"青浦区\" },\r\n            { label: \"崇明区\", value: \"崇明区\" },\r\n            { label: \"奉贤区\", value: \"奉贤区\" },\r\n        ],\r\n      }\r\n  },\r\n  watch:{\r\n      district_choose(val){\r\n          this.getLineData()\r\n      },\r\n      choose_year(val){\r\n          this.getBarData()\r\n      }\r\n  },\r\n  methods:{\r\n      isInArray: function (arr, value) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (value === arr[i]) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n      getLineData(){\r\n          let that = this\r\n          let data = {}\r\n          data['district'] = this.district_choose\r\n          if (this.DistrictInfo.year.length!=0){\r\n              this.DistrictInfo.year = []\r\n          }\r\n          if (this.DistrictInfo.population.length!=0){\r\n              this.DistrictInfo.population = []\r\n          }\r\n          if (this.DistrictInfo.population_density.length!=0){\r\n              this.DistrictInfo.population_density = []\r\n          }\r\n          filterlinepopulationdistrict(data).then(res=>{\r\n              if (res.code === 20000){\r\n                  let result = res.data\r\n                  result.sort(function(a, b){\r\n                     return parseInt(a.year) > parseInt(b.year) ? 1:-1\r\n                  })\r\n                  for (let i=0; i<result.length; i++){\r\n                      that.DistrictInfo.year.push(result[i]['year'])\r\n                      that.DistrictInfo.population.push(parseFloat(result[i]['population']).toFixed(0))\r\n                      that.DistrictInfo.population_density.push(parseFloat(result[i]['population_density']).toFixed(2))\r\n                  }\r\n                  that.DistrictInfo.district = that.district_choose\r\n              }\r\n          })\r\n      },\r\n      getYearData:function(){\r\n          let that = this\r\n          getdistrictpopulation().then(res=>{\r\n              if (res.code === 20000){\r\n                  let result = res.data\r\n                  for (let i=0; i<result.length; i++){\r\n                      if (!that.isInArray(that.year_option, result[i]['year'])){\r\n                          that.year_option.push(result[i]['year'])\r\n                      }\r\n                  }\r\n              }\r\n          })\r\n      },\r\n      getBarData(){\r\n          let that = this\r\n          let data = {}\r\n          data['year'] = this.choose_year\r\n          if (this.TimeInfo.district.length!=0){\r\n              this.TimeInfo.district = []\r\n          }\r\n          if (this.TimeInfo.population.length!=0){\r\n              this.TimeInfo.population = []\r\n          }\r\n          if (this.TimeInfo.population_density.length!=0){\r\n              this.TimeInfo.population_density = []\r\n          }\r\n          filterbarpopulationdistrict(data).then(res=>{\r\n              if (res.code === 20000){\r\n                  let result = res.data\r\n                  for (let i=0; i<result.length; i++){\r\n                      that.TimeInfo.district.push(result[i]['district'])\r\n                      that.TimeInfo.population.push(parseFloat(result[i]['population']).toFixed(2))\r\n                      that.TimeInfo.population_density.push(parseFloat(result[i]['population_density']).toFixed(2))\r\n                  }\r\n              }\r\n          })\r\n      }\r\n  },\r\n  mounted(){\r\n      this.getLineData()\r\n      this.getYearData()\r\n      this.getBarData()\r\n  }\r\n};\r\n",null]}