{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\project\\add\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\project\\add\\index.vue","mtime":1640053529309},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getallmodels, savemodels } from '@/api/model'\r\nexport default {\r\n    data(){\r\n        return{\r\n            add_dialog: false,\r\n            table_loading: false,\r\n            tableData: [],\r\n            page_data: [],\r\n            total_size: 0,\r\n            currentPage: 1,\r\n            page_size: 10,\r\n            add_form: {\r\n                name: '',\r\n                type: '',\r\n                describe: '',\r\n                pic_url: ''\r\n            },\r\n            select_type:[\r\n                {value: '数据预测模型', value: '数据预测模型'},\r\n                {value: '数据拟合模型', value: '数据聚类模型'},\r\n                {value: '关联分析模型', value: '关联分析模型'}\r\n            ],\r\n            fileList: []\r\n        }\r\n    },\r\n    methods:{\r\n        uploadSuccess(res, file, fileList){\r\n            this.add_form.pic_url = res.url\r\n        },\r\n        handleRemove(file, fileList) {\r\n            console.log(file, fileList);\r\n        },\r\n        addClick:function(){\r\n            this.add_dialog = true\r\n        },\r\n        AddConfirm:function(){\r\n            let that = this\r\n            if (this.add_form.name === '' || this.add_form.type === '' || this.add_form.describe === '' || this.add_form.pic_url === ''){\r\n                this.$message.error('表格未完善或未上传图片')\r\n            }\r\n            else{\r\n                savemodels(this.add_form).then(res=>{\r\n                    if (res.code === 20000){\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '增加成功'\r\n                        })\r\n                        that.add_form.name=that.add_form.type=that.add_form.describe=that.add_form.pic_url=''\r\n                        that.add_dialog = false\r\n                        that.tableData = []\r\n                        that.page_data = []\r\n                        that.getData()\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        exceedFile:function(){\r\n            this.$message.error('超出最大上传文件数')\r\n        },\r\n        getData:function(){\r\n            let that = this\r\n            this.table_loading = true\r\n            getallmodels().then(res=>{\r\n                if (res.code === 20000){\r\n                    that.table_loading = false\r\n                    that.tableData = res.data\r\n                    let size = that.page_size\r\n                    let index = that.currentPage-1\r\n                    let data = res.data\r\n                    for (let i=index*size; i<(index+1)*size; i++){\r\n                        if (i==data.length){\r\n                            break\r\n                        }\r\n                        that.page_data.push(data[i])\r\n                    }\r\n                    that.total_size = res.data.length\r\n                }\r\n            })\r\n        },\r\n        handleSizeChange(val){\r\n            this.table_loading = true\r\n            this.page_size = val\r\n            this.currentPage = 1\r\n            this.page_data = []\r\n            this.getData()\r\n        },\r\n        handleCurrentChange(val){\r\n            this.currentPage = val\r\n            this.page_data = []\r\n            this.getData()\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getData()\r\n    }\r\n}\r\n",null]}