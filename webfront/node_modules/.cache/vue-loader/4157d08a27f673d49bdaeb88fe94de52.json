{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web\\webfront\\src\\views\\economy\\District\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\src\\views\\economy\\District\\index.vue","mtime":1609073358401},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {\r\n  filtereconomydistrict,\r\n  filterpieeconomydistrict,\r\n  geteconomydistrict,\r\n  filterbareconomydistrict,\r\n} from \"@/api/model\";\r\nimport gdp from \"./components/gdp\";\r\nimport gdpfirstindustry from \"./components/gdp_first_industry\";\r\nimport gdpsecondindustry from \"./components/gdp_second_industry\";\r\nimport gdpthirdindustry from \"./components/gdp_third_industry\";\r\nimport piedata from \"./components/piedata\";\r\nimport bardata from \"./components/bardata\";\r\nexport default {\r\n  name: \"index\",\r\n  components: {\r\n    gdp,\r\n    gdpfirstindustry,\r\n    gdpsecondindustry,\r\n    gdpthirdindustry,\r\n    piedata,\r\n    bardata,\r\n  },\r\n  data() {\r\n    return {\r\n      total_year: [],\r\n      choose_year_one: \"2017\",\r\n      district_choose_two: \"浦东新区\",\r\n      choose_year_two: \"2017\",\r\n      district_choose: \"浦东新区\",\r\n      district_options: [\r\n        { label: \"黄浦区\", value: \"黄浦区\" },\r\n        { label: \"普陀区\", value: \"普陀区\" },\r\n        { label: \"静安区\", value: \"静安区\" },\r\n        { label: \"长宁区\", value: \"长宁区\" },\r\n        { label: \"徐汇区\", value: \"徐汇区\" },\r\n        { label: \"虹口区\", value: \"虹口区\" },\r\n        { label: \"杨浦区\", value: \"杨浦区\" },\r\n        { label: \"宝山区\", value: \"宝山区\" },\r\n        { label: \"嘉定区\", value: \"嘉定区\" },\r\n        { label: \"闵行区\", value: \"闵行区\" },\r\n        { label: \"浦东新区\", value: \"浦东新区\" },\r\n        { label: \"金山区\", value: \"金山区\" },\r\n        { label: \"松江区\", value: \"松江区\" },\r\n        { label: \"青浦区\", value: \"青浦区\" },\r\n        { label: \"崇明区\", value: \"崇明区\" },\r\n        { label: \"奉贤区\", value: \"奉贤区\" },\r\n      ],\r\n      BasicInfo: {\r\n        GDPData: {\r\n          year: [],\r\n          gdp: [],\r\n          district: \"\",\r\n        },\r\n        GDP_First_Industry: {\r\n          year: [],\r\n          gdp: [],\r\n          district: \"\",\r\n        },\r\n        GDP_Second_Industry: {\r\n          year: [],\r\n          gdp: [],\r\n          district: \"\",\r\n        },\r\n        GDP_Third_Industry: {\r\n          year: [],\r\n          gdp: [],\r\n          district: \"\",\r\n        },\r\n      },\r\n      PieInfo: {\r\n        data: [],\r\n        district: \"\",\r\n        year: \"\",\r\n      },\r\n      BarInfo: {\r\n        district: [],\r\n        gdp: [],\r\n        gdp_first_industry: [],\r\n        gdp_second_industry: [],\r\n        gdp_third_industry: [],\r\n      },\r\n    };\r\n  },\r\n  watch: {\r\n    district_choose(val) {\r\n      this.getGDPData(val);\r\n    },\r\n    district_choose_two(val) {\r\n      this.getPieData();\r\n    },\r\n    choose_year_two(val) {\r\n      this.getPieData();\r\n    },\r\n    choose_year_one(val) {\r\n      this.getBarData();\r\n    },\r\n  },\r\n  methods: {\r\n    isInArray: function (arr, value) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (value === arr[i]) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    getGDPData: function (place) {\r\n      let that = this;\r\n      this.total_year = [];\r\n      if (this.BasicInfo.GDPData.year.length != 0) {\r\n        this.BasicInfo.GDPData.year = [];\r\n      }\r\n      if (this.BasicInfo.GDPData.gdp.length != 0) {\r\n        this.BasicInfo.GDPData.gdp = [];\r\n      }\r\n      if (this.BasicInfo.GDP_First_Industry.year.length != 0) {\r\n        this.BasicInfo.GDP_First_Industry.year = [];\r\n      }\r\n      if (this.BasicInfo.GDP_First_Industry.gdp.length != 0) {\r\n        this.BasicInfo.GDP_First_Industry.gdp = [];\r\n      }\r\n      if (this.BasicInfo.GDP_Second_Industry.year.length != 0) {\r\n        this.BasicInfo.GDP_Second_Industry.year = [];\r\n      }\r\n      if (this.BasicInfo.GDP_Second_Industry.gdp.length != 0) {\r\n        this.BasicInfo.GDP_Second_Industry.gdp = [];\r\n      }\r\n      if (this.BasicInfo.GDP_Third_Industry.year.length != 0) {\r\n        this.BasicInfo.GDP_Third_Industry.year = [];\r\n      }\r\n      if (this.BasicInfo.GDP_Third_Industry.gdp.length != 0) {\r\n        this.BasicInfo.GDP_Third_Industry.gdp = [];\r\n      }\r\n      let data = {};\r\n      data[\"district\"] = place;\r\n      filtereconomydistrict(data).then((res) => {\r\n        if (res.code === 20000) {\r\n          let result = res.data;\r\n          result.sort(function (a, b) {\r\n            return parseInt(a.year) > parseInt(b.year) ? 1 : -1;\r\n          });\r\n          for (let i = 0; i < result.length; i++) {\r\n            if (!that.isInArray(that.total_year, result[i][\"year\"])) {\r\n              that.total_year.push(result[i][\"year\"]);\r\n            }\r\n            that.BasicInfo.GDPData.year.push(parseFloat(result[i][\"year\"]));\r\n            that.BasicInfo.GDPData.gdp.push(parseFloat(result[i][\"gdp\"]));\r\n            that.BasicInfo.GDPData.district = that.district_choose;\r\n            that.BasicInfo.GDP_First_Industry.year.push(\r\n              parseFloat(result[i][\"year\"])\r\n            );\r\n            that.BasicInfo.GDP_First_Industry.gdp.push(\r\n              parseFloat(result[i][\"gdp_first_industry\"])\r\n            );\r\n            that.BasicInfo.GDP_First_Industry.district = that.district_choose;\r\n            that.BasicInfo.GDP_Second_Industry.year.push(\r\n              parseFloat(result[i][\"year\"])\r\n            );\r\n            that.BasicInfo.GDP_Second_Industry.gdp.push(\r\n              parseFloat(result[i][\"gdp_second_industry\"])\r\n            );\r\n            that.BasicInfo.GDP_Second_Industry.district = that.district_choose;\r\n            that.BasicInfo.GDP_Third_Industry.year.push(\r\n              parseFloat(result[i][\"year\"])\r\n            );\r\n            that.BasicInfo.GDP_Third_Industry.gdp.push(\r\n              parseFloat(result[i][\"gdp_third_industry\"])\r\n            );\r\n            that.BasicInfo.GDP_Third_Industry.district = that.district_choose;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    getPieData: function () {\r\n      let that = this;\r\n      let year = this.choose_year_two;\r\n      let district = this.district_choose_two;\r\n      let data = {};\r\n      if (this.PieInfo.data.length != 0) {\r\n        this.PieInfo.data = [];\r\n      }\r\n      data[\"district\"] = district;\r\n      data[\"year\"] = year;\r\n      filterpieeconomydistrict(data).then((res) => {\r\n        if (res.code === 20000) {\r\n          let result = res.data[0];\r\n          that.PieInfo.data.push({\r\n            value: parseFloat(result[\"gdp_first_industry\"]),\r\n            name: \"第一产业\",\r\n          });\r\n          that.PieInfo.data.push({\r\n            value: parseFloat(result[\"gdp_second_industry\"]),\r\n            name: \"第二产业\",\r\n          });\r\n          that.PieInfo.data.push({\r\n            value: parseFloat(result[\"gdp_third_industry\"]),\r\n            name: \"第三产业\",\r\n          });\r\n          that.PieInfo.district = result[\"district\"];\r\n          that.PieInfo.year = result[\"year\"];\r\n        }\r\n      });\r\n    },\r\n    getData: function () {\r\n      let that = this;\r\n      geteconomydistrict().then((res) => {\r\n        if (res.code === 20000) {\r\n          let result = res.data;\r\n          for (let i = 0; i < result.length; i++) {\r\n            if (!that.isInArray(that.total_year, result[i][\"year\"])) {\r\n              that.total_year.push(result[i][\"year\"]);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    getBarData: function () {\r\n      let that = this;\r\n      if (this.BarInfo.district.length != 0) {\r\n        this.BarInfo.district = [];\r\n      }\r\n      if (this.BarInfo.gdp.length != 0) {\r\n        this.BarInfo.gdp = [];\r\n      }\r\n      if (this.BarInfo.gdp_first_industry.length != 0) {\r\n        this.BarInfo.gdp_first_industry = [];\r\n      }\r\n      if (this.BarInfo.gdp_second_industry.length != 0) {\r\n        this.BarInfo.gdp_second_industry = [];\r\n      }\r\n      if (this.BarInfo.gdp_third_industry.length != 0) {\r\n        this.BarInfo.gdp_third_industry = [];\r\n      }\r\n      let data = {};\r\n      data[\"year\"] = this.choose_year_one;\r\n      filterbareconomydistrict(data).then((res) => {\r\n        if (res.code === 20000) {\r\n          let result = res.data;\r\n          for (let i = 0; i < result.length; i++) {\r\n            that.BarInfo.district.push(result[i][\"district\"]);\r\n            that.BarInfo.gdp.push(parseFloat(result[i][\"gdp\"]));\r\n            that.BarInfo.gdp_first_industry.push(\r\n              parseFloat(result[i][\"gdp_first_industry\"])\r\n            );\r\n            that.BarInfo.gdp_second_industry.push(\r\n              parseFloat(result[i][\"gdp_second_industry\"])\r\n            );\r\n            that.BarInfo.gdp_third_industry.push(\r\n              parseFloat(result[i][\"gdp_third_industry\"])\r\n            );\r\n          }\r\n        }\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getGDPData(this.district_choose);\r\n    this.getPieData();\r\n    this.getData();\r\n    this.getBarData();\r\n  },\r\n};\r\n",null]}