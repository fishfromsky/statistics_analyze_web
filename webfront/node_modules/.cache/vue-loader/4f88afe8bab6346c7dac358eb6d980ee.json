{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\repository\\regression\\data\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\repository\\regression\\data\\index.vue","mtime":1609073358495},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport column from './components/column.vue'\r\nimport datatable from './components/table.vue'\r\nimport uploadexcel from './components/UploadFile.vue'\r\nimport { inputregressionparameter, regressionid } from '@/api/model'\r\nexport default {\r\n  name: 'index',\r\n  components: {\r\n    column,\r\n    datatable,\r\n    uploadexcel\r\n  },\r\n  data(){\r\n    return{\r\n      table_loading: false,\r\n      upload_dialog: false,\r\n      hasData: false,\r\n      tableData: [],\r\n      tableHeader: [],\r\n      project_id: '',\r\n      id_list: [],\r\n      table_transfer_id: ''\r\n    }\r\n  },\r\n  methods: {\r\n    handledownload:function(){\r\n      this.$refs.datatable.download()\r\n    },\r\n    get_project_id:function(){\r\n      var that = this\r\n      regressionid().then(res=>{\r\n        let data = res.data\r\n        for (let i=0; i<data.length; i++){\r\n            that.id_list.push(data[i])\r\n        }\r\n      })\r\n    },\r\n    handle_dialog:function(data){\r\n      this.upload_dialog = true\r\n    },\r\n    handle_id: function(data){\r\n      if (data !== ''){\r\n        this.table_transfer_id = data\r\n      }\r\n    },\r\n    beforeUpload(file) {\r\n      const isLt1M = file.size / 1024 / 1024 < 1\r\n\r\n      if (isLt1M) {\r\n        return true\r\n      }\r\n      this.$message({\r\n        message: 'Please do not upload files larger than 1m in size.',\r\n        type: 'warning'\r\n      })\r\n      return false\r\n    },\r\n    handleSuccess({ results, header }) {\r\n      this.tableData = results\r\n      this.tableHeader = header\r\n      this.hasData = true\r\n    },\r\n    cancelInput:function(){\r\n      this.tableData = []\r\n      this.tableHeader = []\r\n      this.upload_dialog = false,\r\n      this.hasData = false\r\n    },\r\n    DataInput(func){\r\n      if (this.project_id === ''){\r\n        this.$message.error('请选择项目编号')\r\n      }\r\n      else{\r\n        var that = this;\r\n        this.table_loading = true\r\n        const table = []\r\n        for (let i = 0; i < this.tableData.length; i++) {\r\n          table.push(this.tableData[i])\r\n        }\r\n        const data = {}\r\n        data['data'] = table\r\n        data['project_id'] = this.project_id\r\n        func(data).then(res => {\r\n          that.table_loading = false\r\n          if (res.code === 20000) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '导入数据成功'\r\n            })\r\n          } else {\r\n            this.$message.error(res.message)\r\n            that.table_loading = false\r\n          }\r\n          that.tableData = []\r\n          that.tableHeader = []\r\n          that.hasData = false\r\n        }).catch(res => {\r\n          console.log(res)\r\n          that.table_loading = false\r\n          that.tableData = []\r\n          that.tableHeader = []\r\n          that.hasData = false\r\n        })\r\n      }\r\n    },\r\n    InputParameter:function(){\r\n      this.DataInput(inputregressionparameter)\r\n    },\r\n  },\r\n  mounted(){\r\n    this.get_project_id()\r\n  }\r\n}\r\n",null]}