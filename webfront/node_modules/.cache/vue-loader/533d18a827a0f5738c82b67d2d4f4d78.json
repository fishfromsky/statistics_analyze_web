{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\repository\\linearregression\\data\\components\\table.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\repository\\linearregression\\data\\components\\table.vue","mtime":1609073358482},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getlinearregressionparameter } from '@/api/model'\r\nexport default {\r\n  props: {\r\n    parentmsg: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n      project_id: null,\r\n      table_loading: false,\r\n      tablekey: 0,\r\n      tableData: [],\r\n      page_data: [],\r\n      total_size: 0,\r\n      currentPage: 1,\r\n      page_size: 10,\r\n      filename: 'linear_regression_data',\r\n      autoWidth: true,\r\n      bookType: 'xlsx',\r\n    }\r\n  },\r\n  watch: {\r\n    parentmsg: function(a, b){\r\n      let that = this\r\n      this.project_id = a\r\n      this.page_data = []\r\n      this.tableData = []\r\n      let data = {}\r\n      this.getData()\r\n    }\r\n  },\r\n  methods: {\r\n    formatJson(filterVal, jsonData) {\r\n        return jsonData.map(v => filterVal.map(j => {\r\n            if (j === 'timestamp') {\r\n            return parseTime(v[j])\r\n            } else {\r\n            return v[j]\r\n            }\r\n        }))\r\n    },\r\n    download:function(){\r\n      import('@/vendor/Export2Excel').then(excel => {\r\n          const tHeader = ['project_id', 'resident_population', 'population_of_density', 'number_of_households', 'average_population_per_household', 'urban_residents_per_capita_disposable_income',\r\n          'consumer_expenditure', 'general_public_expenditure', 'investment_in_urban_infrastructure', 'urban_population_density', 'greening_coverage', 'gross_local_product', 'gross_domestic_product_per_capita',\r\n          'gross_domestic_product_of_the_first_industry', 'gross_value_of_secondary_industry', 'gross_value_of_the_tertiary_industry', 'investment_in_environmental_protection', 'number_of_college_students',\r\n          'level_of_education', 'municial_household_garbage']\r\n          const filterVal = ['project_id', 'resident_population', 'population_of_density', 'number_of_households', 'average_population_per_household', 'urban_residents_per_capita_disposable_income',\r\n          'consumer_expenditure', 'general_public_expenditure', 'investment_in_urban_infrastructure', 'urban_population_density', 'greening_coverage', 'gross_local_product', 'gross_domestic_product_per_capita',\r\n          'gross_domestic_product_of_the_first_industry', 'gross_value_of_secondary_industry', 'gross_value_of_the_tertiary_industry', 'investment_in_environmental_protection', 'number_of_college_students',\r\n          'level_of_education', 'municial_household_garbage']\r\n          const list = this.tableData\r\n          const data = this.formatJson(filterVal, list)\r\n          excel.export_json_to_excel({\r\n          header: tHeader,\r\n          data,\r\n          filename: this.filename,\r\n          autoWidth: this.autoWidth,\r\n          bookType: this.bookType\r\n          })\r\n      })\r\n    },\r\n    getData:function(){\r\n      this.table_loading = true\r\n      let data = {}\r\n      let that = this\r\n      data['project_id'] = this.project_id\r\n      getlinearregressionparameter(data).then(res => {\r\n        if (res.code === 20000){\r\n          that.table_loading = false\r\n          that.tableData = res.data\r\n          let size = that.page_size\r\n          let index = that.currentPage-1\r\n          for (let i=index*size; i<(index+1)*size; i++){\r\n              if (i==res.data.length){\r\n                  break\r\n              }\r\n              that.page_data.push(res.data[i])\r\n          }\r\n          that.total_size = res.data.length\r\n        }\r\n      })\r\n    },\r\n    handleSizeChange(val){\r\n      this.table_loading = true\r\n      this.page_size = val\r\n      this.currentPage = 1\r\n      this.page_data = []\r\n      this.getData()\r\n    },\r\n    handleCurrentChange(val){\r\n      this.currentPage = val\r\n      this.page_data = []\r\n      this.getData()\r\n    }\r\n  }\r\n}\r\n",null]}