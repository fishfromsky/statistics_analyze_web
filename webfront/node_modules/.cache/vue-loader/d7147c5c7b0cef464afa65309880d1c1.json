{"remainingRequest":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\repository\\lstmModel\\manageProject\\components\\p_median.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\src\\views\\repository\\lstmModel\\manageProject\\components\\p_median.vue","mtime":1640053532023},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectsAll\\statistics_analyze_web_2\\webfront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getLstmProject, addLstmProject, amendLstmProject, LstmProjectStart } from '@/api/model'\r\nexport default {\r\n    data(){\r\n        return{\r\n            table_loading: true,\r\n            tablekey: 0,\r\n            tableData: [],\r\n            page_data: [],\r\n            formData: [],\r\n            total_size: 0,\r\n            currentPage: 1,\r\n            page_size: 10,\r\n            amend_dialog: false,\r\n            get_dialog: false,\r\n            add_dialog: false,\r\n            choose_data_dialog: false,\r\n            choose_test_dialog: false,\r\n            LocationImage: false,\r\n            form: {},\r\n            choose_dialog: false,\r\n            add_form: {\r\n                project_id: '',\r\n                name: ''\r\n            },\r\n            get_form: {\r\n                project_id: '',\r\n                plot_num: ''\r\n            },\r\n            url: '',\r\n            image_loading: false,\r\n            choose_item: ['未选择', '模型训练', '模型预测'],\r\n            choose_data: ['人口', '人口密度', '自然增长率', '户数', '平均每户人口', '失业率', 'GDP', '人均GDP', 'GDP增长率'],\r\n            selected_list: [],\r\n            predict_list: [],\r\n            tableshow: true,\r\n            selected_project: null\r\n        }\r\n    },\r\n    methods: {\r\n        Select_Index:function(arr_main, arr_child){\r\n            let index = []\r\n            let flag = true\r\n            for (let i=0; i<arr_main.length; i++){\r\n                flag = true\r\n                for (let j=0; j<arr_child.length; j++){\r\n                    if (arr_main[i]===arr_child[j]){\r\n                        flag=false\r\n                        break\r\n                    }\r\n                }\r\n                if (flag){\r\n                    index.push(i)\r\n                }\r\n            }\r\n            return index;\r\n        },\r\n        PredictExperiment:function(){\r\n            if (this.predict_list === []){\r\n                this.$message.error('选择数据不能为空!')\r\n            }\r\n            else{\r\n                this.choose_test_dialog = false\r\n                let val = this.selected_project\r\n                let that = this\r\n                let data = {}\r\n                let index_list = []\r\n                data['project_id'] = this.page_data[val].project_id\r\n                index_list = this.Select_Index(this.choose_data, this.predict_list)\r\n                data['select_list'] = index_list.toString()\r\n                data['type'] = '0'\r\n                LstmProjectStart(data).then(res=>{\r\n                    if (res.code === 20000){\r\n                        that.$message({\r\n                            type: 'success',\r\n                            message: '运行成功'\r\n                        })\r\n                        that.table_loading = true\r\n                        that.page_data = []\r\n                        that.tableData = []\r\n                        that.getData()\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        TrainExperiment:function(){\r\n            if (this.selected_list === []){\r\n                this.$message.error('选择数据不能为空!')\r\n            }\r\n            else{\r\n                this.choose_data_dialog = false\r\n                let val = this.selected_project\r\n                let that = this\r\n                let data = {}\r\n                let index_list = []\r\n                data['project_id'] = this.page_data[val].project_id\r\n                index_list = this.Select_Index(this.choose_data, this.selected_list)\r\n                data['select_list'] = index_list.toString()\r\n                data['type'] = '1'\r\n                LstmProjectStart(data).then(res=>{\r\n                    if (res.code === 20000){\r\n                        that.$message({\r\n                            type: 'success',\r\n                            message: '运行成功'\r\n                        })\r\n                        that.table_loading = true\r\n                        that.page_data = []\r\n                        that.tableData = []\r\n                        that.getData()\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        ChooseType:function(index){\r\n            let index_item=null;\r\n            let msg = this.page_data[index].tag\r\n            let data = this.page_data\r\n            for (let i=0; i<this.choose_item.length; i++){\r\n                if (this.choose_item[i]==msg){\r\n                    index_item=i;\r\n                    break;\r\n                }\r\n            }\r\n            if (index_item === this.choose_item.length-1){\r\n                index_item=0;\r\n            }\r\n            else{\r\n                index_item++;\r\n            }\r\n            data[index].tag = this.choose_item[index_item]\r\n            this.page_data = data\r\n            this.table_loading = true\r\n            this.tableshow = false\r\n            setTimeout(() => {\r\n                this.table_loading = false\r\n                this.tableshow = true\r\n            }, 100);\r\n        },\r\n        Refresh:function(){\r\n            this.table_loading = true\r\n            this.page_data = []\r\n            this.tableData = []\r\n            this.getData()\r\n        },\r\n        Experiment:function(val){\r\n            if (this.page_data[val].tag === '未选择'){\r\n                this.$message.error('请选择实验类型')\r\n            }\r\n            else if (this.page_data[val].tag === '模型训练'){\r\n                this.choose_data_dialog = true\r\n                this.selected_project = val\r\n            }\r\n            else{\r\n                this.choose_test_dialog = true\r\n                this.selected_project = val\r\n            }\r\n        },\r\n        getData(){\r\n            let that = this\r\n            getLstmProject().then(res=>{\r\n                if (res.code === 20000){\r\n                    that.table_loading = false\r\n                    that.tableData = res.data\r\n                    let size = that.page_size\r\n                    let index = that.currentPage-1\r\n                    for (let i=index*size; i<(index+1)*size; i++){\r\n                        if (i==res.data.length){\r\n                            break\r\n                        }\r\n                        res.data[i].tag = '未选择'\r\n                        that.page_data.push(res.data[i])\r\n                    }\r\n                    that.total_size = res.data.length\r\n                }\r\n            })\r\n        },\r\n        AmendData(index){\r\n           this.form = this.page_data[index]\r\n           this.amend_dialog = true\r\n           \r\n        },\r\n        AmendDataConfirm(){\r\n            let data = this.form\r\n            let that = this\r\n            amendLstmProject(data).then(res=>{\r\n                if (res.code === 20000){\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '修改成功'\r\n                    })\r\n                    that.page_data = []\r\n                    that.getData()\r\n                }\r\n            })\r\n            this.amend_dialog = false\r\n        },\r\n        Project_start(index){\r\n        if (this.page_data[index].lstm_project_table_size === 0) {\r\n          this.$message.error('请先导入实验参数表')\r\n        } else {\r\n            let that = this\r\n            LstmProjectStart(this.page_data[index].project_id).then(res=>{\r\n              if(res.code === 20000) {\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '模型开始运行'\r\n                })\r\n              } else if (res.code === 50000) {\r\n                this.$message({\r\n                  type: 'error',\r\n                  message: '模型已在运行中！'\r\n                })\r\n              }\r\n            }\r\n            )\r\n        }\r\n        },\r\n        addPrograme(){\r\n          this.add_dialog = true\r\n        },\r\n        addDataConfirm(){\r\n            let data = this.add_form\r\n            if (this.add_form.project_id === ''){\r\n                this.$message.error('请输入项目ID')\r\n            }\r\n            else if (this.add_form.name === ''){\r\n                this.$message.error('请输入项目名称')\r\n            }\r\n            else{\r\n                 let that = this\r\n                addLstmProject(data).then(res=>{\r\n                    if (res.code === 20000){\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '添加成功'\r\n                        })\r\n                        that.page_data = []\r\n                        that.getData()\r\n                    }\r\n                })\r\n                this.add_dialog = false\r\n            }\r\n        },\r\n        handleSizeChange(val){\r\n            this.table_loading = true\r\n            this.page_size = val\r\n            this.currentPage = 1\r\n            this.page_data = []\r\n            this.getData()\r\n        },\r\n        handleCurrentChange(val){\r\n            this.currentPage = val\r\n            this.page_data = []\r\n            this.getData()\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getData()\r\n    }\r\n}\r\n",null]}