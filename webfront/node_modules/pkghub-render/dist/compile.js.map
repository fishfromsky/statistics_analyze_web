{"version":3,"sources":["../libs/compile.js"],"names":[],"mappings":";;;;;;;;uBAAoB,UAAU;;;;;;;;;;;;;;;qBAYf,UAAS,QAAQ,EAAwC;MAAtC,IAAI,gCAAG,EAAE;MAAE,IAAI,gCAAG,EAAE,MAAM,EAAE,MAAM,EAAE;;AACpE,SAAO,yBAAY,UAAC,GAAG,EAAE,GAAG,EAAK;AAC/B,QAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;;AAE1B,QAAI;AACF,UAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;AAC/B,UAAI,IAAI,CAAA;;AAER,UAAI,MAAM,KAAK,MAAM,EACnB,IAAI,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA;AAC3C,UAAI,MAAM,KAAK,MAAM,EACnB,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAA;AAC5C,UAAI,MAAM,KAAK,KAAK,EAClB,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAA;;AAEnE,UAAI,CAAC,IAAI,EACP,OAAO,GAAG,CAAC,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC,CAAA;;AAE/D,UAAI,OAAO,IAAI,AAAC,KAAK,QAAQ,EAC3B,OAAO,GAAG,CAAC,IAAI,CAAC,CAAA;;AAElB,SAAG,CAAC,IAAI,CAAC,CAAA;KACV,CAAC,OAAO,GAAG,EAAE;AACZ,aAAO,GAAG,CAAC,GAAG,CAAC,CAAA;KAChB;GACF,CAAC,CAAA;CACH","file":"libs/compile.js","sourcesContent":["import Promise from 'bluebird'\n\n/**\n*\n* Render html string by given tempate and data\n* Built-in template engine: ['swig']\n*\n* @param {String(Path)} [template] [the template abs path]\n* @param {Object} [data] [the template locals]\n* @param {Object} [engine] [the view engine's object, contains `engine.name`, `engine._engine`]\n*\n**/\nexport default function(template, data = {}, opts = { engine: 'swig' }) {\n  return new Promise((res, rej) => {\n    const engine = opts.engine\n    \n    try {\n      const _engine = require(engine)\n      var html\n\n      if (engine === 'jade') \n        html = _engine.renderFile(template, data)\n      if (engine === 'swig') \n        html = _engine.compileFile(template)(data)\n      if (engine === 'ejs') \n        html = _engine.render(require('fs').readFileSync(template), data)\n\n      if (!html)\n        return rej(new Error('Template engine is not supported yet'))\n      // Errors come from view engine\n      if (typeof(html) === 'object')\n        return rej(html)\n\n      res(html)\n    } catch (err) {\n      return rej(err)\n    }\n  })\n}\n"]}